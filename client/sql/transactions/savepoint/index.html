<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/sql/content/111-transactions/105-savepoint.md"></div> <h1 id="savepoint">SAVEPOINT</h1>
<p>A savepoint is a way of implementing subtransactions (nested transactions) within a relational database management system by indicating a particular point within a transaction that a user can “roll back” to in case of failure. The main property of a savepoint is that it enables you to create a rollback segment within a transaction. This allows you to revert the changes made to the database after the Savepoint without having to discard the entire transaction.</p>
<p>A Savepoint might be used in instances where if a particular operation fails, you would like to revert the database to the state it was in before the operation was attempted, but you do not want to give up on the entire transaction.</p>
<h2 id="savepoint-syntax">Savepoint Syntax</h2>
<p>The general syntax for <code>SAVEPOINT</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F8F8F2">SAVEPOINT savepoint_name;</span></span>
<span class="line"></span></code></pre>
<h2 id="use-of-savepoint">Use of Savepoint</h2>
<p>Here is the basic usage of savepoint:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">START TRANSACTION</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">INSERT INTO</span><span style="color:#F8F8F2"> Table1 (Column1) </span><span style="color:#FF79C6">VALUES</span><span style="color:#F8F8F2"> (</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">Value1</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">SAVEPOINT SP1;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">INSERT INTO</span><span style="color:#F8F8F2"> Table1 (Column1) </span><span style="color:#FF79C6">VALUES</span><span style="color:#F8F8F2"> (</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">Value2</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">ROLLBACK</span><span style="color:#FF79C6"> TO</span><span style="color:#F8F8F2"> SP1;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">COMMIT</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span></code></pre>
<p>In this example, an initial <code>INSERT</code> statement is performed before a Savepoint named <code>SP1</code> is created. Another <code>INSERT</code> statement is called and then <code>ROLLBACK TO SP1</code> is executed. This means all changes between the creation of <code>SP1</code> and <code>ROLLBACK TO SP1</code> are reverted. After that, ‘COMMIT’ is used to permanently store the changes made by the first <code>INSERT</code> statement.</p>
<h2 id="release-savepoint">Release Savepoint</h2>
<p>The <code>RELEASE SAVEPOINT</code> deletes a savepoint within a transaction.</p>
<p>Here’s the syntax:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F8F8F2">RELEASE SAVEPOINT savepoint_name;</span></span>
<span class="line"></span></code></pre>
<p>The action of releasing a savepoint removes the named savepoint from the set of savepoints of the current transaction. No changes are undone.</p>
<h2 id="remove-savepoint">Remove Savepoint</h2>
<p>The <code>ROLLBACK TO SAVEPOINT</code> removes a savepoint within a transaction.</p>
<p>Here’s the syntax:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">ROLLBACK</span><span style="color:#FF79C6"> TRANSACTION</span><span style="color:#FF79C6"> TO</span><span style="color:#F8F8F2"> savepoint_name;</span></span>
<span class="line"></span></code></pre>
<p>This statement rolls back a transaction to the named savepoint without terminating the transaction.</p>
<p>Please note, savepoint names are not case sensitive and must obey the syntax rules of the server.</p>