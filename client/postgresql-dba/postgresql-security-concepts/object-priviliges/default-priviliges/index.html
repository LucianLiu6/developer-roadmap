<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/106-postgresql-security-concepts/100-object-priviliges/101-default-priviliges.md"></div> <h1 id="default-privileges-in-postgresql">Default Privileges in PostgreSQL</h1>
<p>PostgreSQL allows you to define object privileges for various types of database objects. These privileges determine if a user can access and manipulate objects like tables, views, sequences, or functions. In this section, we will focus on understanding default privileges in PostgreSQL.</p>
<h2 id="what-are-default-privileges">What are default privileges?</h2>
<p>When an object is created in PostgreSQL, it is assigned a set of initial privileges. These initial privileges are known as <em>default privileges</em>. Default privileges are applied to objects created by a specific user, and can be configured to grant or restrict access to other users or groups.</p>
<p>The main purpose of default privileges is to simplify the process of granting the necessary access to objects for various database users. By configuring default privileges, you can control the level of access users have to database objects without having to manually assign privileges each time a new object is created.</p>
<h2 id="configuring-default-privileges">Configuring default privileges</h2>
<p>To configure default privileges, you can use the <code>ALTER DEFAULT PRIVILEGES</code> command. This command allows you to define the privileges that are granted or revoked by default for objects created by a specific user.</p>
<p>Here’s a basic syntax of the <code>ALTER DEFAULT PRIVILEGES</code> command:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">ALTER</span><span style="color:#FF79C6"> DEFAULT</span><span style="color:#F8F8F2"> PRIVILEGES</span></span>
<span class="line"><span style="color:#F8F8F2">    [ FOR { ROLE | USER } target_role [, ...] ]</span></span>
<span class="line"><span style="color:#F8F8F2">    [ IN SCHEMA schema_name [, ...] ]</span></span>
<span class="line"><span style="color:#F8F8F2">    { </span><span style="color:#FF79C6">GRANT</span><span style="color:#F8F8F2"> | </span><span style="color:#FF79C6">REVOKE</span><span style="color:#F8F8F2"> } privs</span></span>
<span class="line"><span style="color:#F8F8F2">    [ GRANT OPTION ]</span></span>
<span class="line"><span style="color:#F8F8F2">    [ CASCADE | RESTRICT ]</span></span>
<span class="line"></span></code></pre>
<p>Let’s go through some examples to better understand how to use this command:</p>
<p><strong>Example 1:</strong> Grant SELECT privilege on all tables created by user1 to user2:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">ALTER</span><span style="color:#FF79C6"> DEFAULT</span><span style="color:#F8F8F2"> PRIVILEGES </span><span style="color:#FF79C6">FOR</span><span style="color:#F8F8F2"> USER user1</span></span>
<span class="line"><span style="color:#FF79C6">    GRANT</span><span style="color:#FF79C6"> SELECT</span><span style="color:#FF79C6"> ON</span><span style="color:#F8F8F2"> TABLES </span><span style="color:#FF79C6">TO</span><span style="color:#F8F8F2"> user2;</span></span>
<span class="line"></span></code></pre>
<p><strong>Example 2:</strong> Revoke INSERT privilege on all sequences created by user1 in schema ‘public’ from user3:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">ALTER</span><span style="color:#FF79C6"> DEFAULT</span><span style="color:#F8F8F2"> PRIVILEGES </span><span style="color:#FF79C6">FOR</span><span style="color:#F8F8F2"> USER user1</span></span>
<span class="line"><span style="color:#FF79C6">    IN</span><span style="color:#FF79C6"> SCHEMA</span><span style="color:#F8F8F2"> public</span></span>
<span class="line"><span style="color:#FF79C6">    REVOKE</span><span style="color:#FF79C6"> INSERT</span><span style="color:#FF79C6"> ON</span><span style="color:#F8F8F2"> SEQUENCES </span><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> user3;</span></span>
<span class="line"></span></code></pre>
<h2 id="resetting-default-privileges">Resetting default privileges</h2>
<p>To reset the default privileges to the system defaults, you can simply revoke the previously granted privileges using the <code>ALTER DEFAULT PRIVILEGES</code> command along with the <code>REVOKE</code> clause.</p>
<p>For example, to reset the default privileges on tables created by user1:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">ALTER</span><span style="color:#FF79C6"> DEFAULT</span><span style="color:#F8F8F2"> PRIVILEGES </span><span style="color:#FF79C6">FOR</span><span style="color:#F8F8F2"> USER user1</span></span>
<span class="line"><span style="color:#FF79C6">    REVOKE</span><span style="color:#F8F8F2"> ALL PRIVILEGES </span><span style="color:#FF79C6">ON</span><span style="color:#F8F8F2"> TABLES </span><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> PUBLIC;</span></span>
<span class="line"></span></code></pre>
<h2 id="summary">Summary</h2>
<p>In conclusion, default privileges in PostgreSQL are a convenient way to automatically grant or restrict users’ access to database objects. You can control the default privileges using the <code>ALTER DEFAULT PRIVILEGES</code> command, making it easier to manage object-level permissions across your database for specific users or groups.</p>