<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/102-rdbms-concepts/101-relational-model/100-domains.md"></div> <h1 id="domains-in-postgresql">Domains in PostgreSQL</h1>
<p>Domains in PostgreSQL are essentially user-defined data types that can be created using the <code>CREATE DOMAIN</code> command. These custom data types allow you to apply constraints and validation rules to columns in your tables by defining a set of values that are valid for a particular attribute or field. This ensures consistency and data integrity within your relational database.</p>
<h2 id="creating-domains">Creating Domains</h2>
<p>To create a custom domain, you need to define a name for your domain, specify its underlying data type, and set any constraints or default values you want to apply. The syntax for creating a new domain is:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> DOMAIN</span><span style="color:#50FA7B"> domain_name</span><span style="color:#FF79C6"> AS</span><span style="color:#F8F8F2"> underlying_data_type</span></span>
<span class="line"><span style="color:#F8F8F2">  [DEFAULT expression]</span></span>
<span class="line"><span style="color:#F8F8F2">  [NOT NULL]</span></span>
<span class="line"><span style="color:#F8F8F2">  [CHECK (condition)];</span></span>
<span class="line"></span></code></pre>
<ul>
<li><code>domain_name</code>: The name of the custom domain you want to create.</li>
<li><code>underlying_data_type</code>: The existing PostgreSQL data type on which your domain is based.</li>
<li><code>DEFAULT expression</code>: An optional default value for the domain when no value is provided.</li>
<li><code>NOT NULL</code>: Determines whether null values are allowed in the domain. If set, null values are not allowed.</li>
<li><code>CHECK (condition)</code>: Specifies a constraint that must be met for values in the domain.</li>
</ul>
<h2 id="example">Example</h2>
<p>Suppose you want to create a custom domain to store phone numbers. This domain should only accept valid 10-digit phone numbers as input. Hereâ€™s an example of how you might define this domain:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> DOMAIN</span><span style="color:#50FA7B"> phone_number</span><span style="color:#FF79C6"> AS</span><span style="color:#FF79C6"> VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">  NOT NULL</span></span>
<span class="line"><span style="color:#FF79C6">  CHECK</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">VALUE</span><span style="color:#F8F8F2"> ~ </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">^[0-9]{10}$</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<p>Now that your <code>phone_number</code> domain is created, you can use it when defining columns in your tables. For example:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> customers</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  id </span><span style="color:#FF79C6">serial</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">  name</span><span style="color:#FF79C6"> VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">50</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  phone phone_number</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<p>In this example, the <code>phone</code> column is based on the <code>phone_number</code> domain and will only accept values that pass the defined constraints.</p>
<h2 id="modifying-and-deleting-domains">Modifying and Deleting Domains</h2>
<p>You can alter your custom domains by using the <code>ALTER DOMAIN</code> command. To delete a domain, you can use the <code>DROP DOMAIN</code> command. Be aware that dropping a domain may affect the tables with columns based on it.</p>
<h2 id="summary">Summary</h2>
<p>Domains in PostgreSQL are a great way to enforce data integrity and consistency in your relational database. They allow you to create custom data types based on existing data types with added constraints, default values, and validation rules. By using domains, you can streamline your database schema and ensure that your data complies with your business rules or requirements.</p>