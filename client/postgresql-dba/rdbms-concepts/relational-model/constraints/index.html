<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/102-rdbms-concepts/101-relational-model/104-constraints.md"></div> <h1 id="constraints-in-postgresql">Constraints in PostgreSQL</h1>
<p>Constraints are an essential part of the relational model, as they define rules that the data within the database must follow. They ensure that the data is consistent, accurate, and reliable. In this section, weâ€™ll explore various types of constraints in PostgreSQL and how to implement them.</p>
<h2 id="primary-key">Primary Key</h2>
<p>A primary key constraint is a column or a set of columns that uniquely identifies each row in a table. There can only be one primary key per table, and its value must be unique and non-null for each row.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> users</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  id </span><span style="color:#FF79C6">SERIAL</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  username </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  email </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">NOT NULL</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h2 id="foreign-key">Foreign Key</h2>
<p>A foreign key constraint ensures that a column or columns in a table refer to an existing row in another table. It helps maintain referential integrity between tables.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> orders</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  order_id </span><span style="color:#FF79C6">SERIAL</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  user_id </span><span style="color:#FF79C6">INTEGER</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  product_id </span><span style="color:#FF79C6">INTEGER</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">  FOREIGN KEY</span><span style="color:#F8F8F2"> (user_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> users (id),</span></span>
<span class="line"><span style="color:#FF79C6">  FOREIGN KEY</span><span style="color:#F8F8F2"> (product_id) </span><span style="color:#FF79C6">REFERENCES</span><span style="color:#F8F8F2"> products (id)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h2 id="unique">Unique</h2>
<p>A unique constraint ensures that the values in a column or set of columns are unique across all rows in a table. In other words, it prevents duplicate entries in the specified column(s).</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> users</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  id </span><span style="color:#FF79C6">SERIAL</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  username </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">UNIQUE</span><span style="color:#FF79C6"> NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  email </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">UNIQUE</span><span style="color:#FF79C6"> NOT NULL</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h2 id="check">Check</h2>
<p>A check constraint verifies that the values entered into a column meet a specific condition. It helps to maintain data integrity by restricting the values that can be inserted into a column.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> products</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  product_id </span><span style="color:#FF79C6">SERIAL</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  product_name </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  price </span><span style="color:#FF79C6">NUMERIC</span><span style="color:#FF79C6"> CHECK</span><span style="color:#F8F8F2"> (price </span><span style="color:#FF79C6">>=</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h2 id="not-null">Not Null</h2>
<p>A NOT NULL constraint enforces that a column cannot contain a NULL value. This ensures that a value must be provided for the specified column when inserting or updating data in the table.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> users</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  id </span><span style="color:#FF79C6">SERIAL</span><span style="color:#FF79C6"> PRIMARY KEY</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  username </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  email </span><span style="color:#FF79C6">VARCHAR</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">NOT NULL</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h2 id="exclusion">Exclusion</h2>
<p>An exclusion constraint is a more advanced form of constraint that allows you to specify conditions that should not exist when comparing multiple rows in a table. It helps maintain data integrity by preventing conflicts in data.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> TABLE</span><span style="color:#50FA7B"> reservation</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">  user_id </span><span style="color:#FF79C6">INTEGER</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  reserved_from </span><span style="color:#FF79C6">TIMESTAMP</span><span style="color:#FF79C6"> NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  reserved_to </span><span style="color:#FF79C6">TIMESTAMP</span><span style="color:#FF79C6"> NOT NULL</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  EXCLUDE </span><span style="color:#FF79C6">USING</span><span style="color:#F8F8F2"> gist (user_id </span><span style="color:#FF79C6">WITH</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2">, tsrange(reserved_from, reserved_to) </span><span style="color:#FF79C6">WITH</span><span style="color:#F8F8F2"> &#x26;&#x26;)</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<p>In conclusion, constraints are a vital aspect of managing data within PostgreSQL. By using the various constraint types, you can ensure that your data is accurate, consistent, and maintains its integrity over time.</p>