<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/111-troubleshooting-techniques/104-profiling-tools/100-gdb.md"></div> <h1 id="gdb-gnu-debugger">GDB (GNU Debugger)</h1>
<p>GDB, the GNU Debugger, is a powerful debugging tool that provides inspection and modification features for applications written in various programming languages, including C, C++, and Fortran. GDB can be used alongside PostgreSQL for investigating backend processes and identifying potential issues that might not be apparent at the application level.</p>
<p>In the context of PostgreSQL, GDB can be utilized to:</p>
<ul>
<li>Examine the running state of PostgreSQL processes.</li>
<li>Set breakpoints and watchpoints in the PostgreSQL source code.</li>
<li>Investigate the values of variables during the execution of queries.</li>
<li>Analyze core dumps and trace the associated logs in case of crashes.</li>
</ul>
<p>To use GDB with PostgreSQL, follow these steps:</p>
<ul>
<li>
<p>Install GDB on your system, typically using the package manager for your operating system.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#50FA7B">sudo</span><span style="color:#F1FA8C"> apt-get</span><span style="color:#F1FA8C"> install</span><span style="color:#F1FA8C"> gdb</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p>Attach GDB to a running PostgreSQL process using the process ID of the desired PostgreSQL backend.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#50FA7B">gdb</span><span style="color:#BD93F9"> -p</span><span style="color:#F8F8F2"> [process_id]</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p>Set breakpoints based on function names or source code file names and line numbers.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>break function_name</span></span>
<span class="line"><span>break filename:linenumber</span></span>
<span class="line"><span></span></span></code></pre>
</li>
<li>
<p>Run the <code>continue</code> command in GDB to resume the execution of the PostgreSQL process.</p>
</li>
<li>
<p>Use the interactive GDB console to examine the current execution state, find values of variables or expressions, and modify them as needed.</p>
</li>
<li>
<p>Debug core dumps when PostgreSQL crashes by running the following command:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#50FA7B">gdb</span><span style="color:#F1FA8C"> /path/to/postgres-binary</span><span style="color:#F1FA8C"> /path/to/core-dump</span></span>
<span class="line"></span></code></pre>
</li>
</ul>
<p>Keep in mind that using GDB with a production PostgreSQL environment is not recommended due to the potential risk of freezing or crashing the server. Always use GDB on a test or development environment.</p>
<p>For more information on how to use GDB and its commands, refer to the <a href="https://sourceware.org/gdb/current/onlinedocs/gdb/" rel="noopener noreferrer nofollow" target="_blank">official GDB documentation</a>.</p>