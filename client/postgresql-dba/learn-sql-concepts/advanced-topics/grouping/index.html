<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/104-learn-sql-concepts/103-advanced-topics/104-grouping.md"></div> <h1 id="grouping">Grouping</h1>
<p>Grouping is a powerful technique in SQL that allows you to organize and aggregate data based on common values in one or more columns. The <code>GROUP BY</code> clause is used to create groups, and the <code>HAVING</code> clause is used to filter the group based on certain conditions.</p>
<h2 id="group-by-clause">GROUP BY Clause</h2>
<p>The <code>GROUP BY</code> clause organizes the rows of the result into groups, with each group containing rows that have the same values for the specified column(s). It’s often used with aggregate functions like <code>SUM()</code>, <code>COUNT()</code>, <code>AVG()</code>, <code>MIN()</code>, and <code>MAX()</code> to perform calculations on each group.</p>
<p>Here’s a simple example to illustrate the concept:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#F8F8F2"> department, </span><span style="color:#8BE9FD">COUNT</span><span style="color:#F8F8F2">(employee_id) </span><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> employee_count</span></span>
<span class="line"><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> employees</span></span>
<span class="line"><span style="color:#FF79C6">GROUP BY</span><span style="color:#F8F8F2"> department;</span></span>
<span class="line"></span></code></pre>
<p>This query will return the number of employees in each department. The result will be a new set of rows, with each row representing a department and the corresponding employee count.</p>
<h2 id="having-clause">HAVING Clause</h2>
<p>The <code>HAVING</code> clause is used to filter the grouped results based on a specified condition. Unlike the <code>WHERE</code> clause, which filters individual rows before the grouping, the <code>HAVING</code> clause filters groups after the aggregation.</p>
<p>Here’s an example that uses the <code>HAVING</code> clause:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#F8F8F2"> department, </span><span style="color:#8BE9FD">COUNT</span><span style="color:#F8F8F2">(employee_id) </span><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> employee_count</span></span>
<span class="line"><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> employees</span></span>
<span class="line"><span style="color:#FF79C6">GROUP BY</span><span style="color:#F8F8F2"> department</span></span>
<span class="line"><span style="color:#FF79C6">HAVING</span><span style="color:#F8F8F2"> employee_count </span><span style="color:#FF79C6">></span><span style="color:#BD93F9"> 5</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span></code></pre>
<p>This query returns the departments that have more than 5 employees.</p>
<h2 id="grouping-with-multiple-columns">Grouping with Multiple Columns</h2>
<p>You can group by multiple columns to create more complex groupings. The following query calculates the total salary for each department and job title:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#F8F8F2"> department, job_title, </span><span style="color:#8BE9FD">SUM</span><span style="color:#F8F8F2">(salary) </span><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> total_salary</span></span>
<span class="line"><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> employees</span></span>
<span class="line"><span style="color:#FF79C6">GROUP BY</span><span style="color:#F8F8F2"> department, job_title;</span></span>
<span class="line"></span></code></pre>
<p>The result will be a new set of rows, with each row representing a unique combination of department and job title, along with the total salary for that grouping.</p>
<h2 id="summary">Summary</h2>
<p>Grouping is a useful technique for organizing and aggregating data in SQL. The <code>GROUP BY</code> clause allows you to create groups of rows with common values in one or more columns, and then perform aggregate calculations on those groups. The <code>HAVING</code> clause can be used to filter the grouped results based on certain conditions.</p>