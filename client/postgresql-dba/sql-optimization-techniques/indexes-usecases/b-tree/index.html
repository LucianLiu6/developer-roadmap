<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/112-sql-optimization-techniques/100-indexes-usecases/100-b-tree.md"></div> <h1 id="b-tree-indexes">B-Tree Indexes</h1>
<p>B-Tree (short for Balanced Tree) is the default index type in PostgreSQL, and it’s designed to work efficiently with a broad range of queries. A B-Tree is a data structure that enables fast search, insertion, and deletion of elements in a sorted order.</p>
<h2 id="key-features-of-b-tree">Key Features of B-Tree:</h2>
<ul>
<li>
<p><strong>Balanced tree structure:</strong> The tree remains balanced, with each path from root node to a leaf node having approximately the same length. This ensures predictable performance with an even distribution of data.</p>
</li>
<li>
<p><strong>Support for various query types:</strong> B-Tree indexes are versatile, supporting equality, range queries, greater-than, less-than, and sorting operations.</p>
</li>
<li>
<p><strong>Efficient updates:</strong> PostgreSQL maintains write and space efficiency for B-Trees through algorithms, like page splitting and the use of the “fillfactor” setting.</p>
</li>
</ul>
<h2 id="when-to-use-b-tree-indexes">When to use B-Tree Indexes</h2>
<p>Consider using B-Tree indexes in the following scenarios:</p>
<ul>
<li>
<p><strong>Equality and range queries:</strong> If your query involves filtering by a column or a range of values, B-Tree indexes are an ideal choice.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> orders </span><span style="color:#FF79C6">WHERE</span><span style="color:#F8F8F2"> order_date </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">2020-01-01</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> orders </span><span style="color:#FF79C6">WHERE</span><span style="color:#F8F8F2"> total_amount </span><span style="color:#FF79C6">></span><span style="color:#BD93F9"> 1000</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p><strong>Sorting and ordering:</strong> B-Tree indexes can be used for optimizing ORDER BY and GROUP BY clauses.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#F8F8F2"> customer_id, </span><span style="color:#8BE9FD">SUM</span><span style="color:#F8F8F2">(total_amount) </span><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> orders </span><span style="color:#FF79C6">GROUP BY</span><span style="color:#F8F8F2"> customer_id;</span></span>
<span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#FF79C6"> *</span><span style="color:#FF79C6"> FROM</span><span style="color:#F8F8F2"> products </span><span style="color:#FF79C6">ORDER BY</span><span style="color:#F8F8F2"> price </span><span style="color:#FF79C6">DESC</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p><strong>Unique constraints:</strong> B-Tree indexes can enforce unique constraints on columns.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> UNIQUE INDEX</span><span style="color:#50FA7B"> unique_email_idx</span><span style="color:#FF79C6"> ON</span><span style="color:#F8F8F2"> users (email);</span></span>
<span class="line"></span></code></pre>
</li>
</ul>
<h2 id="limitations">Limitations</h2>
<p>B-Tree indexes have some limitations:</p>
<ul>
<li>They do not support indexing on complex data types like arrays or full-text search.</li>
<li>B-Trees perform better with uniformly distributed data. Highly unbalanced trees can lead to performance issues.</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>B-Tree indexes are the most commonly used index type in PostgreSQL – versatile, efficient, and well-suited for various query types. Understanding their functionality helps you write optimized queries and maintain efficient database schemas. However, it’s essential to know other index types in PostgreSQL and when to use them for specific use cases.</p>