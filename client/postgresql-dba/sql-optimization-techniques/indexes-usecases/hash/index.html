<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/112-sql-optimization-techniques/100-indexes-usecases/101-hash.md"></div> <h1 id="hash-indexes">Hash Indexes</h1>
<p>Hash Indexes are a type of database index that uses a hash function to map each row’s key value into a fixed-length hashed key. The purpose of using a hash index is to enable quicker search operations by converting the key values into a more compact and easily searchable format. Let’s discuss some important aspects and use cases of hash indexes in PostgreSQL.</p>
<h2 id="how-hash-indexes-work">How Hash Indexes Work</h2>
<p>In a hash index, the key values are passed through a hash function (e.g., MD5 or FNV-1a). This function generates a short, fixed-length hash value which can be easily compared during search operations. The rows with the same hash values are stored in “buckets”, allowing for fast search and retrieval operations when looking for a specific key.</p>
<h2 id="use-cases-for-hash-indexes">Use Cases for Hash Indexes</h2>
<ul>
<li>
<p>Equality queries: Hash indexes are designed for improving the performance of equality queries (<code>WHERE column = value</code>). Since hash indexes only store the hashed key values, they cannot be used for range queries or queries with other comparison operators (e.g., <code>&#x3C;</code>, <code>></code>, <code>LIKE</code>).</p>
</li>
<li>
<p>High cardinality columns: In cases where a column has a high number of distinct values (high cardinality), hash indexes can reduce the overall index size and improve query performance.</p>
</li>
<li>
<p>Low-selectivity indexes: When a large number of rows share the same key value, hash indexes can offer faster join operations by reducing the time required to match equal values.</p>
</li>
</ul>
<h2 id="limitations-of-hash-indexes">Limitations of Hash Indexes</h2>
<ul>
<li>
<p>Not suitable for range queries: As mentioned earlier, hash indexes cannot be used for range queries or queries using comparison operators.</p>
</li>
<li>
<p>Index size: The hash function might produce collisions, where multiple key values generate the same hash value. This can lead to increased index size and decreased performance in some cases.</p>
</li>
<li>
<p>Unordered data: Since hash indexes store data in an unordered manner, they cannot be used for operations like <code>ORDER BY</code>, which require sorted data.</p>
</li>
</ul>
<h2 id="creating-a-hash-index-in-postgresql">Creating a Hash Index in PostgreSQL</h2>
<p>To create a hash index in PostgreSQL, you can use the <code>CREATE INDEX</code> command with the <code>USING hash</code> clause:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> INDEX</span><span style="color:#50FA7B"> index_name</span><span style="color:#FF79C6"> ON</span><span style="color:#F8F8F2"> table_name </span><span style="color:#FF79C6">USING</span><span style="color:#FF79C6"> hash</span><span style="color:#F8F8F2">(column_name);</span></span>
<span class="line"></span></code></pre>
<p><em>Example:</em></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> INDEX</span><span style="color:#50FA7B"> employees_name_hash</span><span style="color:#FF79C6"> ON</span><span style="color:#F8F8F2"> employees </span><span style="color:#FF79C6">USING</span><span style="color:#FF79C6"> hash</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">name</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<p>In conclusion, hash indexes can be a useful tool for optimizing query performance in specific scenarios, such as equality queries with high cardinality columns. However, it is important to consider the limitations and use cases before implementing hash indexes in your PostgreSQL database.</p>