<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/107-postgresql-infrastructure-skills/105-kubernetes-deployment/index.md"></div> <h1 id="kubernetes-deployment">Kubernetes Deployment</h1>
<p>Kubernetes is an open-source container orchestrator that automates the deployment, scaling, and management of containerized applications in a clustered environment. Kubernetes deployments are a higher-level abstraction of managing the applicationsâ€™ desired state, including the number of replicas and the application version. The main advantage of using Kubernetes is that it provides automated rollouts, easy scaling, and management of your applications.</p>
<h2 id="kubernetes-deployment-components">Kubernetes Deployment Components</h2>
<p>A Kubernetes deployment consists of several key components:</p>
<ul>
<li>
<p><strong>Deployment Object</strong> - Defines the desired state of the application, such as the number of replicas, the version of the application, and the environment.</p>
</li>
<li>
<p><strong>ReplicaSet</strong> - Ensures that the desired number of replicas of the application is always running.</p>
</li>
<li>
<p><strong>Pod</strong> - A group of one or more containers that share the same network and are deployed on the same machine.</p>
</li>
</ul>
<h2 id="deploying-a-postgresql-application-on-kubernetes">Deploying a PostgreSQL Application on Kubernetes</h2>
<p>You can deploy a PostgreSQL application on Kubernetes by following these steps:</p>
<ul>
<li>
<p><strong>Create a Deployment YAML file</strong> - This file will define the deployment specification of your PostgreSQL application. It should specify the PostgreSQL container image, the number of replicas, and any other required settings like environment variables, secrets, and volumes:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>apiVersion: apps/v1</span></span>
<span class="line"><span>kind: Deployment</span></span>
<span class="line"><span>metadata:</span></span>
<span class="line"><span>  name: postgresql</span></span>
<span class="line"><span>spec:</span></span>
<span class="line"><span>  replicas: 2</span></span>
<span class="line"><span>  selector:</span></span>
<span class="line"><span>    matchLabels:</span></span>
<span class="line"><span>      app: postgresql</span></span>
<span class="line"><span>  template:</span></span>
<span class="line"><span>    metadata:</span></span>
<span class="line"><span>      labels:</span></span>
<span class="line"><span>        app: postgresql</span></span>
<span class="line"><span>    spec:</span></span>
<span class="line"><span>      containers:</span></span>
<span class="line"><span>      - name: postgres</span></span>
<span class="line"><span>        image: postgres:latest</span></span>
<span class="line"><span>        env:</span></span>
<span class="line"><span>        - name: POSTGRES_DB</span></span>
<span class="line"><span>          value: mydb</span></span>
<span class="line"><span>        - name: POSTGRES_USER</span></span>
<span class="line"><span>          valueFrom:</span></span>
<span class="line"><span>            secretKeyRef:</span></span>
<span class="line"><span>              name: postgres-secret</span></span>
<span class="line"><span>              key: username</span></span>
<span class="line"><span>        - name: POSTGRES_PASSWORD</span></span>
<span class="line"><span>          valueFrom:</span></span>
<span class="line"><span>            secretKeyRef:</span></span>
<span class="line"><span>              name: postgres-secret</span></span>
<span class="line"><span>              key: password</span></span>
<span class="line"><span>        ports:</span></span>
<span class="line"><span>        - containerPort: 5432</span></span>
<span class="line"><span>          name: postgres</span></span>
<span class="line"><span>        volumeMounts:</span></span>
<span class="line"><span>        - name: postgres-data</span></span>
<span class="line"><span>          mountPath: /var/lib/postgresql/data</span></span>
<span class="line"><span>      volumes:</span></span>
<span class="line"><span>      - name: postgres-data</span></span>
<span class="line"><span>        persistentVolumeClaim:</span></span>
<span class="line"><span>          claimName: postgres-pvc</span></span>
<span class="line"><span></span></span></code></pre>
</li>
<li>
<p><strong>Create and apply the deployment in Kubernetes</strong> - Run <code>kubectl apply -f deployment.yaml</code> to create the deployment in your Kubernetes cluster.</p>
</li>
<li>
<p><strong>Expose the PostgreSQL service</strong> - To access your PostgreSQL application from outside the Kubernetes cluster, you can expose it as a service using <code>kubectl expose</code> command or a YAML file.</p>
</li>
<li>
<p><strong>Scale your deployment</strong> - You can easily scale your PostgreSQL application by changing the number of replicas in the deployment file, then updating it using <code>kubectl apply -f deployment.yaml</code>.</p>
</li>
</ul>
<p>By following these steps, you can successfully deploy and manage a PostgreSQL application using the Kubernetes deployment system.</p>
<ul>
<li><a href="https://cloudnative-pg.io/" rel="noopener noreferrer nofollow" target="_blank">@article@Run PostgreSQL. The Kubernetes way</a></li>
<li><a href="https://app.daily.dev/tags/kubernetes?ref=roadmapsh" rel="noopener noreferrer nofollow" target="_blank">@feed@Explore top posts about Kubernetes</a></li>
</ul>