<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/postgresql-dba/content/107-postgresql-infrastructure-skills/102-backup-recovery-tools/103-pg-probackup.md"></div> <h1 id="pg_probackup">Pg_probackup</h1>
<p><code>Pg_probackup</code> is a powerful and feature-rich backup and recovery tool for PostgreSQL databases. It provides a comprehensive solution for managing and restoring backups, ensuring the safety and reliability of your data. With support for both legacy and modern PostgreSQL features, <code>pg_probackup</code> is an essential tool for database administrators to maintain and safeguard their databases.</p>
<h2 id="features">Features</h2>
<ul>
<li><strong>Full, Incremental, and Differential Backups</strong>: Pg_probackup supports various backup types, giving you the flexibility to choose the best backup strategy for your specific needs.</li>
<li><strong>Backup Compression and Encryption</strong>: Save storage space and protect sensitive data with built-in support for backup compression and encryption.</li>
<li><strong>Automatic Restore Point Creation</strong>: Pg_probackup creates restore points automatically, so you can easily recover your database to any point in time.</li>
<li><strong>Backup Catalog and Retention Policies</strong>: Manage your backups efficiently with a backup catalog and set up retention policies to automatically delete old backups.</li>
<li><strong>Parallel Backup and Recovery</strong>: Speed up the backup and recovery process by performing operations in parallel.</li>
<li><strong>Validation and Verification</strong>: Ensure the accuracy and consistency of your backups and recoveries with built-in validation and verification features.</li>
</ul>
<h2 id="usage">Usage</h2>
<p>Pg_probackup can be installed by downloading the appropriate package for your operating system or building from the source code available on the <a href="https://github.com/postgrespro/pg_probackup" rel="noopener noreferrer nofollow" target="_blank">official repository</a>.</p>
<p>For example, on Debian-based systems, you can install it using <code>apt</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>sudo apt-get update</span></span>
<span class="line"><span>sudo apt-get install pg-probackup</span></span>
<span class="line"><span></span></span></code></pre>
<p>Once installed, you can configure your PostgreSQL instance for backups by setting some configuration parameters in the <code>postgresql.conf</code> file, such as <code>archive_mode</code>, <code>wal_level</code>, and <code>archive_command</code>.</p>
<p>You can then start using pg_probackup to create and manage your backups. Here are some basic commands to help you get started:</p>
<ul>
<li><strong>Initialize Backup Catalog</strong></li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#50FA7B">pg_probackup</span><span style="color:#F1FA8C"> init</span><span style="color:#BD93F9"> -B</span><span style="color:#F1FA8C"> /path/to/backup/catalog</span></span>
<span class="line"></span></code></pre>
<ul>
<li><strong>Create Full Backup</strong></li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#50FA7B">pg_probackup</span><span style="color:#F1FA8C"> backup</span><span style="color:#BD93F9"> -B</span><span style="color:#F1FA8C"> /path/to/backup/catalog</span><span style="color:#BD93F9"> --instance</span><span style="color:#F1FA8C"> your_instance_name</span><span style="color:#BD93F9"> -b</span><span style="color:#F1FA8C"> FULL</span><span style="color:#BD93F9"> --remote-proto=ssh</span><span style="color:#BD93F9"> --remote-host=your_remote_host</span><span style="color:#BD93F9"> --remote-port=your_remote_port</span><span style="color:#BD93F9"> --remote-path=/path/to/database</span><span style="color:#BD93F9"> --remote-user=your_remote_user</span><span style="color:#BD93F9"> -U</span><span style="color:#F1FA8C"> your_pg_user</span><span style="color:#BD93F9"> -d</span><span style="color:#F1FA8C"> your_dbname</span></span>
<span class="line"></span></code></pre>
<ul>
<li><strong>Create Incremental Backup</strong></li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#50FA7B">pg_probackup</span><span style="color:#F1FA8C"> backup</span><span style="color:#BD93F9"> -B</span><span style="color:#F1FA8C"> /path/to/backup/catalog</span><span style="color:#BD93F9"> --instance</span><span style="color:#F1FA8C"> your_instance_name</span><span style="color:#BD93F9"> -b</span><span style="color:#F1FA8C"> PTRACK</span><span style="color:#BD93F9"> --remote-proto=ssh</span><span style="color:#BD93F9"> --remote-host=your_remote_host</span><span style="color:#BD93F9"> --remote-port=your_remote_port</span><span style="color:#BD93F9"> --remote-path=/path/to/database</span><span style="color:#BD93F9"> --remote-user=your_remote_user</span><span style="color:#BD93F9"> -U</span><span style="color:#F1FA8C"> your_pg_user</span><span style="color:#BD93F9"> -d</span><span style="color:#F1FA8C"> your_dbname</span></span>
<span class="line"></span></code></pre>
<ul>
<li><strong>Restore from Backup</strong></li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#50FA7B">pg_probackup</span><span style="color:#F1FA8C"> restore</span><span style="color:#BD93F9"> -B</span><span style="color:#F1FA8C"> /path/to/backup/catalog</span><span style="color:#BD93F9"> --instance</span><span style="color:#F1FA8C"> your_instance_name</span><span style="color:#BD93F9"> -D</span><span style="color:#F1FA8C"> /path/to/restore/directory</span></span>
<span class="line"></span></code></pre>
<p>For more detailed information and additional commands, you can refer to the <a href="https://pg-probackup.readthedocs.io/en/latest/index.html" rel="noopener noreferrer nofollow" target="_blank">official documentation</a>.</p>
<p>With <code>pg_probackup</code>, you can ensure your PostgreSQL data is safe and recoverable, giving you peace of mind and making database management a breeze.</p>