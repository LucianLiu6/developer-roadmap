<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/cpp/content/104-data-types/101-dynamic-typing/100-rtti.md"></div> <h1 id="run-time-type-identification-rtti">Run-Time Type Identification (RTTI)</h1>
<p>Run-Time Type Identification (RTTI) is a feature in C++ that allows you to obtain the type information of an object during program execution. This can be useful when using dynamic typing, where the type of an object can change at runtime.</p>
<p>There are two main mechanisms for RTTI in C++:</p>
<ul>
<li><code>typeid</code> operator</li>
<li><code>dynamic_cast</code> operator</li>
</ul>
<h2 id="typeid-operator">typeid operator</h2>
<p><code>typeid</code> is an operator that returns a reference to an object of type <code>std::type_info</code>, which contains information about the type of the object. The header file <code>&#x3C;typeinfo></code> should be included to use <code>typeid</code>.</p>
<p>Here is an example:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="cpp"><code><span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> &#x3C;</span><span style="color:#F1FA8C">iostream</span><span style="color:#E9F284">></span></span>
<span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> &#x3C;</span><span style="color:#F1FA8C">typeinfo</span><span style="color:#E9F284">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> Base</span><span style="color:#F8F8F2"> { </span><span style="color:#FF79C6">virtual</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> dummy</span><span style="color:#F8F8F2">() {} };</span></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> Derived</span><span style="color:#F8F8F2"> : </span><span style="color:#FF79C6">public</span><span style="color:#8BE9FD;font-style:italic"> Base</span><span style="color:#F8F8F2"> {</span><span style="color:#6272A4"> /* ... */</span><span style="color:#F8F8F2"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">int</span><span style="color:#50FA7B"> main</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">    Base</span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> base_ptr </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#F8F8F2"> Derived;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Using typeid to get the type of the object</span></span>
<span class="line"><span style="color:#F8F8F2">    std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Type: </span><span style="color:#E9F284">"</span><span style="color:#FF79C6"> &#x3C;&#x3C;</span><span style="color:#FF79C6"> typeid</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2">base_ptr).</span><span style="color:#50FA7B">name</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> '</span><span style="color:#FF79C6">\n</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    delete</span><span style="color:#F8F8F2"> base_ptr;</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<h2 id="dynamic_cast-operator">dynamic_cast operator</h2>
<p><code>dynamic_cast</code> is a type-casting operator that performs a runtime type check and safely downcasts a base pointer or reference to a derived pointer or reference. It returns null or throws a bad_cast exception (if casting references) when the casting fails.</p>
<p>Here is an example:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="cpp"><code><span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> &#x3C;</span><span style="color:#F1FA8C">iostream</span><span style="color:#E9F284">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> Base</span><span style="color:#F8F8F2"> { </span><span style="color:#FF79C6">virtual</span><span style="color:#FF79C6"> void</span><span style="color:#50FA7B"> dummy</span><span style="color:#F8F8F2">() {} };</span></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> Derived1</span><span style="color:#F8F8F2"> : </span><span style="color:#FF79C6">public</span><span style="color:#8BE9FD;font-style:italic"> Base</span><span style="color:#F8F8F2"> {</span><span style="color:#6272A4"> /* ... */</span><span style="color:#F8F8F2"> };</span></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> Derived2</span><span style="color:#F8F8F2"> : </span><span style="color:#FF79C6">public</span><span style="color:#8BE9FD;font-style:italic"> Base</span><span style="color:#F8F8F2"> {</span><span style="color:#6272A4"> /* ... */</span><span style="color:#F8F8F2"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">int</span><span style="color:#50FA7B"> main</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">    Base</span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> base_ptr </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#F8F8F2"> Derived1;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Using dynamic_cast to safely downcast the pointer</span></span>
<span class="line"><span style="color:#F8F8F2">    Derived1</span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> derived1_ptr </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> dynamic_cast&#x3C;</span><span style="color:#F8F8F2">Derived1</span><span style="color:#FF79C6">*></span><span style="color:#F8F8F2">(base_ptr);</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (derived1_ptr) {</span></span>
<span class="line"><span style="color:#F8F8F2">        std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Downcast to Derived1 successful</span><span style="color:#FF79C6">\n</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Downcast to Derived1 failed</span><span style="color:#FF79C6">\n</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    Derived2</span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> derived2_ptr </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> dynamic_cast&#x3C;</span><span style="color:#F8F8F2">Derived2</span><span style="color:#FF79C6">*></span><span style="color:#F8F8F2">(base_ptr);</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (derived2_ptr) {</span></span>
<span class="line"><span style="color:#F8F8F2">        std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Downcast to Derived2 successful</span><span style="color:#FF79C6">\n</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Downcast to Derived2 failed</span><span style="color:#FF79C6">\n</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    delete</span><span style="color:#F8F8F2"> base_ptr;</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<p>Please note that the use of RTTI can have some performance overhead, as it requires additional compiler-generated information to be stored and processed during runtime.</p>