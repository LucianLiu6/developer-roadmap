<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/mongodb/content/102-collections/105-bulk-write.md"></div> <h1 id="bulkwrite-and-others">bulkWrite() and others</h1>
<p>Bulk write operations allow you to perform multiple create, update, and delete operations in a single command, which can significantly improve the performance of your application. MongoDB provides two types of bulk write operations:</p>
<ul>
<li>
<p><strong>Ordered Bulk Write</strong>: In this type of bulk operation, MongoDB executes the write operations in the order you provide. If a write operation fails, MongoDB returns an error and does not proceed with the remaining operations.</p>
</li>
<li>
<p><strong>Unordered Bulk Write</strong>: In this type of bulk operation, MongoDB can execute the write operations in any order. If a write operation fails, MongoDB will continue to process the remaining write operations.</p>
</li>
</ul>
<p>To perform a bulk write operation, use the <code>initializeOrderedBulkOp()</code> or <code>initializeUnorderedBulkOp()</code> methods to create a bulk write object.</p>
<h2 id="example-ordered-bulk-write">Example: Ordered Bulk Write</h2>
<p>Here’s an example of an ordered bulk write operation:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> orderedBulk </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> db.</span><span style="color:#50FA7B">collection</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">mycollection</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">).</span><span style="color:#50FA7B">initializeOrderedBulkOp</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">orderedBulk.</span><span style="color:#50FA7B">insert</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">, name</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">John Doe</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> });</span></span>
<span class="line"><span style="color:#F8F8F2">orderedBulk.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> }).</span><span style="color:#50FA7B">updateOne</span><span style="color:#F8F8F2">({ $set</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { name</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Jane Doe</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> } });</span></span>
<span class="line"><span style="color:#F8F8F2">orderedBulk.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2"> }).</span><span style="color:#50FA7B">remove</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">orderedBulk.</span><span style="color:#50FA7B">execute</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">err</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">result</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">  // Handle error or result</span></span>
<span class="line"><span style="color:#F8F8F2">});</span></span>
<span class="line"></span></code></pre>
<h2 id="example-unordered-bulk-write">Example: Unordered Bulk Write</h2>
<p>Here’s an example of an unordered bulk write operation:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> unorderedBulk </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> db.</span><span style="color:#50FA7B">collection</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">mycollection</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">).</span><span style="color:#50FA7B">initializeUnorderedBulkOp</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">unorderedBulk.</span><span style="color:#50FA7B">insert</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">, name</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">John Doe</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> });</span></span>
<span class="line"><span style="color:#F8F8F2">unorderedBulk.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> }).</span><span style="color:#50FA7B">updateOne</span><span style="color:#F8F8F2">({ $set</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { name</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Jane Doe</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> } });</span></span>
<span class="line"><span style="color:#F8F8F2">unorderedBulk.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2"> }).</span><span style="color:#50FA7B">remove</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">unorderedBulk.</span><span style="color:#50FA7B">execute</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">err</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">result</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">  // Handle error or result</span></span>
<span class="line"><span style="color:#F8F8F2">});</span></span>
<span class="line"></span></code></pre>
<p>Remember that using bulk write operations can greatly improve the performance of your MongoDB queries, but make sure to choose the right type (ordered or unordered) based on your application requirements.</p>