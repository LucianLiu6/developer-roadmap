<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/mongodb/content/105-performance-optimization/index-types/101-geospatial.md"></div> <h1 id="geospatial">Geospatial</h1>
<p>Geospatial indexes are used for querying geospatial coordinate data in MongoDB. These indexes are helpful when you want to store information related to spatial or geographical objects, like the location of restaurants, hotels, or landmarks, and perform queries based on proximity or containment.</p>
<p>MongoDB supports two types of geospatial indexes: <strong>2dsphere</strong> and <strong>2d</strong>.</p>
<h2 id="2dsphere-index">2dsphere Index</h2>
<p>The <code>2dsphere</code> index supports queries on the surface of a sphere or a round object, like Earth. It uses the GeoJSON format for storing the geospatial data such as <code>Point</code>, <code>LineString</code>, and <code>Polygon</code>.</p>
<p>To create a 2dsphere index, you can use the <code>createIndex</code> method:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">createIndex</span><span style="color:#F8F8F2">({ location</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">2dsphere</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> });</span></span>
<span class="line"></span></code></pre>
<p>In this example, the <code>location</code> field contains the GeoJSON representation of the geospatial data.</p>
<p>Some common queries using the 2dsphere index include:</p>
<ul>
<li><code>$geoIntersects</code>: Find geometries that intersect with the specified GeoJSON geometry.</li>
<li><code>$geoWithin</code>: Find geometries contained within the specified GeoJSON geometry.</li>
<li><code>$nearSphere</code>: Find geometries that are near a given point.</li>
</ul>
<h2 id="2d-index">2d Index</h2>
<p>The <code>2d</code> index supports queries on a flat Cartesian plane, which can be useful for simpler cases when dealing with small scale data. It stores geospatial data as legacy coordinate pairs.</p>
<p>To create a 2d index, you can use the <code>createIndex</code> method:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">createIndex</span><span style="color:#F8F8F2">({ location</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">2d</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> });</span></span>
<span class="line"></span></code></pre>
<p>In this example, the <code>location</code> field contains a coordinate pair [x, y].</p>
<p>Some common queries using the 2d index include:</p>
<ul>
<li><code>$geoWithin</code>: Find geometries contained within the specified boundary.</li>
<li><code>$center</code>: Find geometries that are near a given point within a given radius.</li>
</ul>
<p>Keep in mind that the 2d index has some limitations. It doesnâ€™t support queries for data spanning the 180-degree meridian (e.g., data wrapping around the Earth), and it cannot handle queries involving measurements or distances in greater depths.</p>
<p>To sum up, geospatial indexes in MongoDB are essential for querying and analyzing geospatial coordinate data. By choosing the correct index type and querying methods, you can efficiently perform location-based queries in your application.</p>