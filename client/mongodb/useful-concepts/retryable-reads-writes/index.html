<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/mongodb/content/102-useful-concepts/102-retryable-reads-writes.md"></div> <h1 id="retryable-reads--writes">Retryable Reads / Writes</h1>
<p>Retryable reads and writes are an essential feature in MongoDB that provides the ability to automatically retry certain read and write operations, ensuring data consistency and improving the fault tolerance of your applications. This feature is especially useful in case of transient network errors or replica set elections that may cause operations to fail temporarily.</p>
<h2 id="retryable-reads">Retryable Reads</h2>
<p>Retryable reads allow MongoDB to automatically retry eligible read operations if they fail due to a transient error. This ensures that the application can continue to perform read operations seamlessly without throwing errors at users due to temporary issues.</p>
<p>Examples of retryable read operations include:</p>
<ul>
<li><code>find()</code></li>
<li><code>aggregate()</code></li>
<li><code>distinct()</code></li>
</ul>
<p>To enable retryable reads, use the following option in your client settings:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">  retryReads: </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<p>By default, newer versions of MongoDB (since v3.6) have retryable reads enabled.</p>
<h2 id="retryable-writes">Retryable Writes</h2>
<p>Similar to retryable reads, retryable writes allow MongoDB to automatically retry specific write operations that fail due to transient errors. This helps maintain data consistency and reduces the chances of data loss or duplicate writes.</p>
<p>Examples of retryable write operations include:</p>
<ul>
<li><code>insertOne()</code></li>
<li><code>updateOne()</code></li>
<li><code>deleteOne()</code></li>
<li><code>findOneAndUpdate()</code></li>
</ul>
<p>To enable retryable writes, use the following option in your client settings:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">  retryWrites: </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<p>By default, MongoDB has retryable writes enabled for replica sets and sharded clusters (since v4.0).</p>
<p><strong>Note</strong>: It’s important to ensure that you’re using a compatible version of the MongoDB server and drivers to take full advantage of retryable reads and writes features. Additionally, these features are not supported in standalone configurations.</p>
<p>For more information, check the official <a href="https://docs.mongodb.com/manual/core/retryable-reads/" rel="noopener noreferrer nofollow" target="_blank">MongoDB documentation on retryable reads</a> and <a href="https://docs.mongodb.com/manual/core/retryable-writes/" rel="noopener noreferrer nofollow" target="_blank">retryable writes</a>.</p>