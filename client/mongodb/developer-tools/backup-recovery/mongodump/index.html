<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/mongodb/content/108-developer-tools/backup-recovery/100-mongodump.md"></div> <h1 id="mongodump">mongodump</h1>
<p><strong>Mongodump</strong> is a utility tool that comes with MongoDB, which is used to create a backup of your data by capturing the BSON output from your MongoDB database. It is especially useful when you want to export data from MongoDB instances, clusters or replica sets for either backup purposes or to migrate data from one environment to another.</p>
<h2 id="how-it-works">How it works</h2>
<p>Mongodump connects to a running <code>mongod</code> or <code>mongos</code> process and extracts the BSON data from the database, which includes collections, their documents, and indexes. The tool stores the exported data in a binary format in a directory named <code>dump</code> by default, with each collection’s data placed inside a separate BSON file.</p>
<h2 id="usage">Usage</h2>
<p>Here’s a basic example of using <code>mongodump</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#50FA7B">mongodump</span><span style="color:#BD93F9"> --uri</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">mongodb://username:password@host:port/database</span><span style="color:#E9F284">"</span><span style="color:#BD93F9"> --out</span><span style="color:#F1FA8C"> /path/to/output/dir</span></span>
<span class="line"></span></code></pre>
<p>Replace the values for <code>username</code>, <code>password</code>, <code>host</code>, <code>port</code>, and <code>database</code> with your actual MongoDB credentials and target database. This command will create a backup of your specified database and will store it in the specified output directory.</p>
<h2 id="options">Options</h2>
<p>Mongodump offers a variety of options to customize your backups:</p>
<ul>
<li><code>--uri</code>: The MongoDB connection string with authentication details.</li>
<li><code>--out</code>: The path to save the output data.</li>
<li><code>--db</code>: The specific database to backup.</li>
<li><code>--collection</code>: The specific collection to backup.</li>
<li><code>--query</code>: An optional query to export only matching documents.</li>
<li><code>--oplog</code>: Include oplog data for a consistent point-in-time snapshot.</li>
<li><code>--gzip</code>: Compress the backup files using gzip.</li>
<li><code>--archive</code>: Write the output to a single archive file instead of individual files.</li>
</ul>
<h2 id="restoring-data-with-mongorestore">Restoring data with <code>mongorestore</code></h2>
<p>To restore data from a <code>mongodump</code> backup, you can use the <code>mongorestore</code> tool, which comes with MongoDB as well. Here’s a basic example of using <code>mongorestore</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#50FA7B">mongorestore</span><span style="color:#BD93F9"> --uri</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">mongodb://username:password@host:port/database</span><span style="color:#E9F284">"</span><span style="color:#BD93F9"> --drop</span><span style="color:#F1FA8C"> /path/to/backup/dir</span></span>
<span class="line"></span></code></pre>
<p>This command will restore the specified database from the backup directory, and the <code>--drop</code> flag will remove any existing data in the target database before restoring the data.</p>
<p>In summary, <code>mongodump</code> is a powerful utility for creating backups of your MongoDB data. Used in conjunction with <code>mongorestore</code>, you can easily create, store, and restore data backups as needed.</p>