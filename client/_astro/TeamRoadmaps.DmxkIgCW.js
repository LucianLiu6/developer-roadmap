import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{g as Y}from"./browser.t5_cZ6DD.js";import{r as n}from"./index.qVDZzPEr.js";import{b as k,d as O}from"./http.DleWH6fe.js";import{p as x}from"./page.BgB1PChG.js";import{u as ee}from"./index.BVW7W7Ao.js";import{b as se}from"./team.BdQJIqcX.js";import{u as ae}from"./use-toast.CP_0jytG.js";import{U as te,S as re}from"./SelectRoadmapModal.DJf9RAGO.js";import{M as oe}from"./Modal.oLN6tDxH.js";import{M as ie}from"./map._bgkvdg2.js";import{S as A}from"./shapes.BUMNhxRY.js";import{C as ne}from"./CreateRoadmapModal.C3z_b9m9.js";import{u as le}from"./use-outside-click.DwmohMvh.js";import{M as de}from"./MoreVerticalIcon.CZUHT-Xy.js";import{E as me}from"./ellipsis-vertical.xxVYgC9t.js";import{L as B}from"./lock.BYgGEG3i.js";import{T as ce,S as pe}from"./ShareOptionsModal.D_3eBlqL.js";import{c as ue}from"./classname.BR_JCrAi.js";import{R as xe}from"./RoadmapIcon.DnxludEj.js";import{S as $}from"./square-pen.DaZGQ2z_.js";import{E as z}from"./external-link.CkKSvBqf.js";import{c as V}from"./createLucideIcon.BiEhg7VK.js";import{G as fe}from"./globe.AFJrkQ23.js";import{U as F}from"./users.VJ3qbYn4.js";import"./jwt.CBjnGchD.js";import"./index.DgoachrA.js";import"./index.BRGkBvr2.js";import"./toast.CxFvZIRu.js";import"./index.es.B1RiJbf6.js";import"./Spinner.xsriOokz.js";import"./resource-progress.D0zUEWjd.js";import"./roadmap.BEsVk7__.js";/* empty css                       */import"./use-keydown.DHXzDwpw.js";import"./dom.DTPLKm7E.js";import"./x.BPEozwHq.js";import"./loader-circle.fm240d5J.js";import"./use-copy-text.oZSbS9-c.js";import"./user-round-plus.BAbkgFeg.js";import"./check.CKlj7MwC.js";import"./copy.CXP3E7D5.js";import"./users-round.C0Aw-B0P.js";import"./circle-check-big.t3HpAHw2.js";import"./twitter.CJQuzyAo.js";import"./facebook.CoYlTxLg.js";import"./linkedin.DgHrbq_t.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=V("PackageMinus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=V("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);function be(o){const{onClose:t,showDefaultRoadmapsModal:i,showCreateCustomRoadmapModal:d}=o;return e.jsxs(oe,{onClose:t,bodyClassName:"p-4",children:[e.jsx("h2",{className:"mb-0.5 text-left text-2xl font-semibold",children:"Pick an Option"}),e.jsx("p",{className:"text-left text-sm text-gray-500 mb-4",children:"Choose from default roadmaps or create from scratch."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{className:"text-base flex items-center rounded-md border border-gray-300 p-2 px-4 text-left font-medium hover:bg-gray-100",onClick:i,children:[e.jsx(ie,{className:"mr-2 inline-block",size:20}),"Use a Default Roadmap"]}),e.jsxs("button",{className:"text-base flex items-center rounded-md border border-gray-300 p-2 px-4 text-left font-medium hover:bg-gray-100",onClick:d,children:[e.jsx(A,{className:"mr-2 inline-block",size:20}),"Create from Scratch"]})]})]})}function E(o){const{onDelete:t,onUpdateSharing:i,onCustomize:d}=o,m=n.useRef(null),[c,l]=n.useState(!1);return le(m,()=>{l(!1)}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{disabled:!1,onClick:()=>l(!c),className:"hidden items-center opacity-60 transition-opacity hover:opacity-100 disabled:cursor-not-allowed disabled:opacity-30 sm:flex",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsxs("button",{disabled:!1,onClick:()=>l(!c),className:"flex items-center gap-1 rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs hover:bg-gray-50 focus:outline-none sm:hidden",children:[e.jsx(me,{size:14}),"Options"]}),c&&e.jsx("div",{ref:m,className:"align-right absolute right-auto top-full z-50 mt-1 w-[140px] rounded-md bg-slate-800 px-2 py-2 text-white shadow-md sm:right-0",children:e.jsxs("ul",{children:[i&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{l(!1),i()},className:"flex w-full cursor-pointer items-center rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(B,{size:14,className:"mr-2"}),"Sharing"]})}),d&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{l(!1),d()},className:"flex w-full cursor-pointer items-center rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(A,{size:14,className:"mr-2"}),"Customize"]})}),t&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{l(!1),t()},className:"flex w-full cursor-pointer items-center rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(ce,{size:14,className:"mr-2"}),"Delete"]})})]})})]})}function fs(){const{t:o}=Y(),t=ee(se),i=ae(),[d,m]=n.useState(!0),[c,l]=n.useState(!1),[X,N]=n.useState(!1),[q,v]=n.useState(!1),[S,P]=n.useState(""),[b,G]=n.useState(),[f,h]=n.useState([]),[M,Z]=n.useState([]),[p,I]=n.useState(null);async function T(){const{error:s,response:a}=await k("/pages.json");if(s){i.error(s.message||"Something went wrong");return}if(!a)return[];const r=a.filter(u=>u.group==="Roadmaps").sort((u,w)=>u.title==="Android"?1:u.title.localeCompare(w.title));return Z(r),a}async function H(s){const{response:a,error:r}=await k(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-team/${s}`);if(r||!a){i.error("Error loading team"),window.location.href="/account";return}G(a)}async function _(s){const{error:a,response:r}=await k(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-team-resource-config/${s}`);if(a||!Array.isArray(r)){console.error(a);return}h(r)}n.useEffect(()=>{o&&(m(!0),Promise.all([H(o),_(o),T()]).finally(()=>{x.set(""),m(!1)}))},[o]);async function J(s){if(!b?._id)return;i.loading("Deleting roadmap"),x.set("Deleting roadmap from team");const{error:a,response:r}=await O(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-delete-team-resource-config/${b._id}`,{resourceId:s,resourceType:"roadmap"});if(a||!r){i.error(a?.message||"Something went wrong");return}i.success("Roadmap removed"),h(r)}async function D(s){if(!o)return;i.loading("Adding roadmap"),x.set("Adding roadmap"),m(!0);const a=M.find(w=>w.id===s),{error:r,response:u}=await O(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-update-team-resource-config/${o}`,{teamId:o,resourceId:s,resourceType:"roadmap",removed:[],renderer:a?.renderer||"balsamiq"});if(r||!u){i.error(r?.message||"Error adding roadmap");return}h(u),i.success("Roadmap added"),a?.renderer==="editor"&&N(!1)}async function y(s){x.set("Removing roadmap"),J(s).finally(()=>{x.set("")})}if(n.useEffect(()=>{function s(a){const{roadmapId:r}=a?.detail;r&&(T().finally(()=>{}),D(r).finally(()=>{x.set("")}))}return window.addEventListener("custom-roadmap-created",s),()=>{window.removeEventListener("custom-roadmap-created",s)}},[]),!b)return null;const C=c&&e.jsx(be,{onClose:()=>l(!1),showDefaultRoadmapsModal:()=>{N(!0),l(!1)},showCreateCustomRoadmapModal:()=>{v(!0),l(!1)}}),K=M.filter(s=>!f.find(a=>a?.defaultRoadmapId===s.id)),U=X&&e.jsx(re,{onClose:()=>N(!1),teamResourceConfig:f,allRoadmaps:K,teamId:o,onRoadmapAdd:s=>{D(s).finally(()=>{x.set("")})},onRoadmapRemove:s=>{confirm("Are you sure you want to remove this roadmap?")&&y(s).finally(()=>{})}}),L=q&&e.jsx(ne,{teamId:o,onClose:()=>{v(!1)},onCreated:()=>{_(o).finally(()=>null),v(!1)}}),j=f.filter(s=>s.isCustomResource&&!s.topics),R=f.filter(s=>s.isCustomResource&&s.topics),g=f.filter(s=>!s.isCustomResource);if(!(R.length>0||g.length>0||j.length>0&&t)&&!d)return e.jsxs("div",{className:"flex flex-col items-center p-4 py-20",children:[C,U,L,e.jsx(xe,{className:"mb-4 h-24 w-24 opacity-10"}),e.jsx("h3",{className:"mb-1 text-2xl font-bold text-gray-900",children:"No roadmaps"}),e.jsx("p",{className:"text-base text-gray-500",children:t?"Add a roadmap to start tracking your team":"Ask your team admin to add some roadmaps"}),t&&e.jsx("button",{className:"mt-4 rounded-lg bg-black px-4 py-2 font-medium text-white hover:bg-gray-900",onClick:()=>l(!0),children:"Add roadmap"})]});const Q=S&&e.jsx(te,{onClose:()=>P(""),resourceId:S,resourceType:"roadmap",teamId:b?._id,setTeamResourceConfig:h,defaultRemovedItems:g.find(s=>s.resourceId===S)?.removed||[]}),W=p&&e.jsx(pe,{description:p.description,visibility:p.visibility,sharedTeamMemberIds:p.sharedTeamMemberIds,sharedFriendIds:p.sharedFriendIds,teamId:o,roadmapId:p.resourceId,onShareSettingsUpdate:s=>{h(a=>a.map(r=>r.resourceId!==p.resourceId?r:{...r,...s}))},onClose:()=>I(null)});return e.jsxs("div",{children:[C,U,L,Q,W,t&&j.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"mb-2 flex items-center justify-between",children:e.jsxs("h3",{className:"flex w-full items-center justify-between text-xs uppercase text-gray-400",children:[e.jsx("span",{className:"flex",children:"Placeholder Roadmaps"}),e.jsxs("span",{className:"normal-case",children:["Total ",j.length," roadmap(s)"]})]})}),e.jsx("div",{className:"flex flex-col divide-y rounded-md border",children:j.map(s=>e.jsxs("div",{className:"grid grid-cols-1 p-2.5 sm:grid-cols-[auto_173px]",children:[e.jsxs("div",{className:"mb-3 grid sm:mb-0",children:[e.jsx("p",{className:"mb-1.5 truncate text-base font-medium leading-tight text-black",children:s.title}),e.jsx("span",{className:"text-xs italic leading-none text-gray-400/60",children:"Placeholder roadmap"})]}),t&&e.jsxs("div",{className:"flex items-center justify-start gap-2 sm:justify-end",children:[e.jsx(E,{onUpdateSharing:()=>{I(s)},onDelete:()=>{confirm("Are you sure you want to remove this roadmap?")&&y(s.resourceId).finally(()=>{})}}),e.jsxs("a",{href:`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_EDITOR_APP_URL}/${s.resourceId}`,className:"flex gap-2 rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs hover:bg-gray-50 focus:outline-none",target:"_blank",children:[e.jsx($,{className:"inline-block h-4 w-4"}),"Create Roadmap"]})]})]},s.resourceId))})]}),R.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"mb-2 flex items-center justify-between",children:e.jsxs("h3",{className:"flex w-full items-center justify-between text-xs uppercase text-gray-400",children:[e.jsx("span",{className:"flex",children:"Custom Roadmaps"}),e.jsxs("span",{className:"normal-case",children:["Total ",R.length," roadmap(s)"]})]})}),e.jsx("div",{className:"flex flex-col divide-y rounded-md border",children:R.map(s=>{const a=`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_EDITOR_APP_URL}/${s.resourceId}`;return e.jsxs("div",{className:ue("grid grid-cols-1 p-2.5",t?"sm:grid-cols-[auto_172px]":"sm:grid-cols-[auto_110px]"),children:[e.jsxs("div",{className:"mb-3 grid grid-cols-1 sm:mb-0",children:[e.jsx("p",{className:"mb-1.5 truncate text-base font-medium leading-tight text-black",children:s.title}),e.jsxs("span",{className:"flex items-center text-xs leading-none text-gray-400",children:[e.jsx(je,{visibility:s.visibility,sharedTeamMemberIds:s.sharedTeamMemberIds,sharedFriendIds:s.sharedFriendIds}),e.jsx("span",{className:"mx-2 font-semibold",children:"Â·"}),e.jsx(A,{size:16,className:"mr-1 inline-block h-4 w-4"}),s.topics," topic"]})]}),e.jsxs("div",{className:"mr-1 flex items-center justify-start sm:justify-end",children:[t&&e.jsx(E,{onUpdateSharing:()=>{I(s)},onCustomize:()=>{window.open(a,"_blank")},onDelete:()=>{confirm("Are you sure you want to remove this roadmap?")&&y(s.resourceId).finally(()=>{})}}),e.jsxs("a",{href:`/r/${s.roadmapSlug}`,className:"ml-2 flex items-center gap-2 rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs hover:bg-gray-50 focus:outline-none",target:"_blank",children:[e.jsx(z,{className:"inline-block h-4 w-4"}),"Visit"]}),t&&e.jsxs("a",{href:a,className:"ml-2 flex items-center gap-2 rounded-md border border-gray-800 bg-gray-900 px-2.5 py-1.5 text-xs text-white hover:bg-gray-800 focus:outline-none",target:"_blank",children:[e.jsx($,{className:"inline-block h-4 w-4"}),"Edit"]})]})]},s.resourceId)})})]}),g.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between",children:e.jsxs("h3",{className:"flex w-full items-center justify-between text-xs uppercase text-gray-400",children:[e.jsx("span",{className:"flex",children:"Default Roadmaps"}),e.jsxs("span",{className:"normal-case",children:["Total ",g.length," roadmap(s)"]})]})}),e.jsx("div",{className:"flex flex-col divide-y rounded-md border",children:g.map(s=>e.jsxs("div",{className:"grid grid-cols-1 p-3 sm:grid-cols-[auto_110px]",children:[e.jsxs("div",{className:"mb-3 grid grid-cols-1 sm:mb-0",children:[e.jsx("p",{className:"mb-1.5 truncate text-base font-medium leading-tight text-black",children:s.title}),e.jsxs("span",{className:"flex items-center text-xs leading-none text-gray-400",children:[s?.removed?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(he,{size:16,className:"mr-1 inline-block h-4 w-4"}),s.removed.length," topics removed"]}),!s?.removed?.length&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:16,className:"mr-1 inline-block h-4 w-4"}),"No changes made"]})]})]}),e.jsxs("div",{className:"mr-1 flex items-center justify-start sm:justify-end",children:[t&&e.jsx(E,{onCustomize:()=>{P(s.resourceId)},onDelete:()=>{confirm("Are you sure you want to remove this roadmap?")&&y(s.resourceId).finally(()=>{})}}),e.jsxs("a",{href:`/${s.resourceId}?t=${o}`,className:"ml-2 flex items-center gap-2 rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs hover:bg-gray-50 focus:outline-none",target:"_blank",children:[e.jsx(z,{className:"inline-block h-4 w-4"}),"Visit"]})]})]},s.resourceId))})]}),t&&e.jsx("div",{className:"mt-5",children:e.jsx("button",{className:"block w-full rounded-md border border-dashed border-gray-300 py-2 text-sm transition-colors hover:border-gray-600 hover:bg-gray-50 focus:outline-0",onClick:()=>l(!0),children:"+ Add new Roadmap"})})]})}const ye={public:{icon:fe,label:"Public"},me:{icon:B,label:"Only me"},team:{icon:F,label:"Team Member(s)"},friends:{icon:F,label:"Friend(s)"}};function je(o){const{visibility:t,sharedTeamMemberIds:i=[],sharedFriendIds:d=[]}=o,{label:m,icon:c}=ye[t];return e.jsxs("span",{className:"inline-flex items-center gap-1.5 whitespace-nowrap text-xs font-normal",children:[e.jsx(c,{className:"inline-block h-3 w-3"}),e.jsxs("div",{className:"flex items-center",children:[t==="team"&&i?.length>0&&e.jsx("span",{className:"mr-1",children:i.length}),t==="friends"&&d?.length>0&&e.jsx("span",{className:"mr-1",children:d.length}),m]})]})}export{fs as TeamRoadmaps};
