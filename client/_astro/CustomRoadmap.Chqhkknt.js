import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{r as d}from"./index.qVDZzPEr.js";import{g as M}from"./browser.t5_cZ6DD.js";import{d as U,c as B,b as O}from"./http.DleWH6fe.js";import{c as C}from"./classname.BR_JCrAi.js";import{u as k}from"./index.BVW7W7Ao.js";import{c as D,a as j,t as $}from"./roadmap.BEsVk7__.js";import{S as _,T as F,a as V}from"./ShareOptionsModal.D_3eBlqL.js";import{c as R}from"./createLucideIcon.BiEhg7VK.js";import{p as E}from"./page.BgB1PChG.js";import{i as z}from"./jwt.CBjnGchD.js";/* empty css                       */import{u as A}from"./use-toast.CP_0jytG.js";import{M as H}from"./Modal.oLN6tDxH.js";import{u as W}from"./use-outside-click.DwmohMvh.js";import{E as X}from"./ellipsis-vertical.xxVYgC9t.js";import{L as I}from"./lock.BYgGEG3i.js";import{S as T}from"./shapes.BUMNhxRY.js";import{ShareRoadmapButton as q}from"./ShareRoadmapButton.Ck9gdhzQ.js";import{s as G}from"./popup.CdCAhVM2.js";import{C as Z}from"./CreateRoadmapModal.C3z_b9m9.js";import{B as Y}from"./badge-check.BsTnpCeG.js";import{TopicDetail as J}from"./TopicDetail.iJALPLqQ.js";import{R as K}from"./readonly-editor.DRQmhAvb.js";import{r as Q,u as ee,a as se,b as te}from"./resource-progress.D0zUEWjd.js";import"./index.BRGkBvr2.js";import"./index.DgoachrA.js";import"./use-copy-text.oZSbS9-c.js";import"./user-round-plus.BAbkgFeg.js";import"./check.CKlj7MwC.js";import"./copy.CXP3E7D5.js";import"./users-round.C0Aw-B0P.js";import"./team.BdQJIqcX.js";import"./users.VJ3qbYn4.js";import"./circle-check-big.t3HpAHw2.js";import"./twitter.CJQuzyAo.js";import"./facebook.CoYlTxLg.js";import"./linkedin.DgHrbq_t.js";import"./loader-circle.fm240d5J.js";import"./toast.CxFvZIRu.js";import"./use-keydown.DHXzDwpw.js";import"./Spinner.xsriOokz.js";import"./chevron-down.C0Ah6WXV.js";import"./markdown.BDsSah-D.js";import"./GoogleIcon.CpoJrDvC.js";import"./x.BPEozwHq.js";import"./file-text.ClL96caK.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=R("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=R("CircleSlash",[["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=R("MessageCircleHeart",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7",key:"43lnbm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=R("PencilRuler",[["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m2 22 5.5-1.5L21.17 6.83a2.82 2.82 0 0 0-4-4L3.5 16.5Z",key:"hes763"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=R("ShieldBan",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);function ie(o){const{isSecondaryBanner:s=!1}=o,[t,r]=d.useState(!1),c=k(D),n=k(j);return e.jsxs(e.Fragment,{children:[t&&c&&n&&e.jsx(_,{roadmapSlug:n?.slug,isDiscoverable:n.isDiscoverable,description:n?.description,visibility:n?.visibility,teamId:n?.teamId,roadmapId:n?._id,sharedFriendIds:n?.sharedFriendIds||[],sharedTeamMemberIds:n?.sharedTeamMemberIds||[],onClose:()=>r(!1),onShareSettingsUpdate:m=>{j.set({...n,...m})}}),e.jsxs("div",{"data-progress-nums-container":"",className:C("striped-loader relative z-50 hidden items-center justify-between bg-white px-2 py-1.5 sm:flex",{"rounded-bl-md rounded-br-md":s,"rounded-md":!s}),children:[e.jsxs("p",{className:"flex text-sm opacity-0 transition-opacity duration-300","data-progress-nums":"",children:[e.jsxs("span",{className:"mr-2.5 rounded-sm bg-yellow-200 px-1 py-0.5 text-xs font-medium uppercase text-yellow-900",children:[e.jsx("span",{"data-progress-percentage":"",children:"0"}),"% Done"]}),e.jsxs("span",{className:"itesm-center hidden md:flex",children:[e.jsxs("span",{children:[e.jsx("span",{"data-progress-done":"",children:"0"})," completed"]}),e.jsx("span",{className:"mx-1.5 text-gray-400",children:"·"}),e.jsxs("span",{children:[e.jsx("span",{"data-progress-learning":"",children:"0"})," in progress"]}),e.jsx("span",{className:"mx-1.5 text-gray-400",children:"·"}),e.jsxs("span",{children:[e.jsx("span",{"data-progress-skipped":"",children:"0"})," skipped"]}),e.jsx("span",{className:"mx-1.5 text-gray-400",children:"·"}),e.jsxs("span",{children:[e.jsx("span",{"data-progress-total":"",children:"0"})," Total"]})]}),e.jsxs("span",{className:"md:hidden",children:[e.jsx("span",{"data-progress-done":"",children:"0"})," of"," ",e.jsx("span",{"data-progress-total":"",children:"0"})," Done"]})]}),e.jsx("div",{className:"flex items-center gap-3 opacity-0 transition-opacity duration-300","data-progress-nums":"",children:e.jsxs("button",{"data-popup":"progress-help",className:"flex items-center gap-1 text-sm font-medium text-gray-500 opacity-0 transition-opacity hover:text-black","data-progress-nums":"",children:[e.jsx(ae,{className:"h-3.5 w-3.5 stroke-[2.5px]"}),"Track Progress"]})})]}),e.jsx("div",{"data-progress-nums-container":"",className:"striped-loader relative -mb-2 flex items-center justify-between rounded-md border bg-white px-2 py-1.5 text-sm text-gray-700 sm:hidden",children:e.jsxs("span",{"data-progress-nums":"",className:"text-gray-500 opacity-0 transition-opacity duration-300",children:[e.jsx("span",{"data-progress-done":"",children:"0"})," of"," ",e.jsx("span",{"data-progress-total":"",children:"0"})," Done"]})})]})}function le(o){const{roadmapTitle:s,roadmapId:t,hasTNSBanner:r=!1,tnsBannerLink:c=""}=o;return e.jsxs("div",{className:C("mb-0 mt-4 rounded-md border-0 sm:mt-7 sm:border",{"sm:-mb-[82px]":r,"sm:-mb-[65px]":!r}),children:[r&&e.jsx("div",{className:"hidden border-b bg-gray-100 px-2 py-1.5 sm:block",children:e.jsxs("p",{className:"text-sm",children:["Get the latest ",s," news from our sister site"," ",e.jsx("a",{href:c,target:"_blank",className:"font-semibold underline",children:"TheNewStack.io"})]})}),e.jsx(ie,{isSecondaryBanner:r,resourceId:t,resourceType:"roadmap"})]})}function de(o){const{onDelete:s,onUpdateSharing:t,onCustomize:r}=o,c=d.useRef(null),[n,m]=d.useState(!1);return W(c,()=>{m(!1)}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{disabled:!1,onClick:()=>m(!n),className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white py-1.5 pl-2 pr-2 text-xs font-medium text-black hover:border-gray-300 hover:bg-gray-300 sm:pl-1.5 sm:pr-3 sm:text-sm",children:[e.jsx(X,{className:"mr-0 h-4 w-4 stroke-[2.5] sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Actions"})]}),n&&e.jsx("div",{ref:c,className:"align-right absolute right-0 top-full mt-1 w-[140px] rounded-md bg-slate-800 px-2 py-2 text-white shadow-md z-[9999]",children:e.jsxs("ul",{children:[t&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{m(!1),t()},className:"flex w-full cursor-pointer items-center rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(I,{size:14,className:"mr-2"}),"Sharing"]})}),r&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{m(!1),r()},className:"flex w-full cursor-pointer items-center rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(T,{size:14,className:"mr-2"}),"Customize"]})}),s&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{m(!1),s()},className:"flex w-full cursor-pointer items-center rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(F,{size:14,className:"mr-2"}),"Delete"]})})]})})]})}function ce(){const[o,s]=d.useState(!1);return e.jsxs(e.Fragment,{children:[o&&e.jsx(Z,{onClose:()=>{s(!1)}}),e.jsxs("div",{className:"relative mb-5 mt-0 rounded-md border border-yellow-500 bg-yellow-100 p-2 sm:-mt-6 sm:mb-7 sm:p-2.5",children:[e.jsx("h2",{className:"text-base font-semibold text-yellow-800 sm:text-lg",children:"Community Roadmap"}),e.jsxs("p",{className:"mt-2 mb-2.5 sm:mb-1.5 sm:mt-1 text-sm text-yellow-800 sm:text-base",children:["This is a custom roadmap made by a community member and is not verified by"," ",e.jsx("span",{className:"font-semibold",children:"roadmap.sh"})]}),e.jsxs("div",{className:"flex items-start sm:items-center flex-col sm:flex-row gap-2",children:[e.jsxs("a",{href:"/roadmaps",className:"inline-flex items-center gap-1.5 text-sm font-semibold text-yellow-700 underline-offset-2 hover:underline",children:[e.jsx(Y,{className:"h-4 w-4 stroke-[2.5]"}),"Visit Official Roadmaps"]}),e.jsx("span",{className:"font-black text-yellow-700 hidden sm:block",children:"·"}),e.jsxs("button",{className:"inline-flex items-center gap-1.5 text-sm font-semibold text-yellow-700 underline-offset-2 hover:underline",onClick:()=>{z()?s(!0):G()},children:[e.jsx(oe,{className:"h-4 w-4 stroke-[2.5]"}),"Create Your Own Roadmap"]})]}),e.jsx(ne,{className:"absolute bottom-2 right-2 hidden h-12 w-12 text-yellow-500 opacity-50 sm:block"})]})]})}function me(o){const s=k(D),t=k(j),{title:r,description:c,_id:n,slug:m,creator:h,team:x,visibility:g}=k(j)||{},[S,b]=d.useState(!1),[y,u]=d.useState(!1),f=A();async function w(){E.set("Deleting roadmap");const a=t?.teamId,p={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL;let N,v;if(a?{error:N,response:v}=await U(`${p}/v1-delete-team-resource-config/${a}`,{resourceId:n,resourceType:"roadmap"}):{error:N,response:v}=await B(`${p}/v1-delete-roadmap/${n}`),N||!v){f.error(N?.message||"Something went wrong");return}f.success("Roadmap removed"),a?window.location.href=`/team/roadmaps?t=${a}`:window.location.href="/account/roadmaps"}const l=h?.avatar?`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_AVATAR_BASE_URL}/${h?.avatar}`:"/images/default-avatar.png",i=y&&e.jsx(H,{onClose:()=>u(!1),wrapperClassName:"max-w-lg",bodyClassName:"p-4 flex flex-col",children:e.jsx(V,{visibility:"public",roadmapSlug:m,roadmapId:n,description:c,onClose:()=>u(!1),isSharingWithOthers:!0})});return e.jsx("div",{className:"border-b",children:e.jsxs("div",{className:"container relative py-5 sm:py-12",children:[!s&&e.jsx(ce,{}),h?.name&&e.jsxs("div",{className:"-mb-1 flex items-center gap-1.5 text-sm text-gray-500",children:[e.jsx("img",{alt:h.name,src:l,className:"h-5 w-5 rounded-full"}),e.jsxs("span",{children:["Created by ",e.jsx("span",{className:"font-semibold text-gray-900",children:h?.name}),x&&e.jsxs(e.Fragment,{children:[" from ",e.jsx("span",{className:"font-semibold text-gray-900",children:x?.name})]})]})]}),e.jsxs("div",{className:"mb-3 mt-4 sm:mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold sm:mb-2 sm:text-4xl",children:r}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500 sm:text-lg",children:c})]}),e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{className:"flex justify-stretch gap-1 sm:gap-2",children:[e.jsxs("a",{href:"/roadmaps",className:"rounded-md bg-gray-500 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-600 sm:text-sm","aria-label":"Back to All Roadmaps",children:["←",e.jsx("span",{className:"hidden sm:inline",children:" All Roadmaps"})]}),e.jsx(q,{roadmapId:n,description:c,pageUrl:`https://roadmap.sh/r/${m}`,allowEmbed:!0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsxs(e.Fragment,{children:[S&&t&&e.jsx(_,{roadmapSlug:t?.slug,isDiscoverable:t.isDiscoverable,description:t?.description,visibility:t?.visibility,teamId:t?.teamId,roadmapId:t?._id,sharedFriendIds:t?.sharedFriendIds||[],sharedTeamMemberIds:t?.sharedTeamMemberIds||[],onClose:()=>b(!1),onShareSettingsUpdate:a=>{j.set({...t,...a})}}),e.jsxs("a",{href:`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_EDITOR_APP_URL}/${t?._id}`,target:"_blank",className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white py-1.5 pl-2 pr-2 text-xs font-medium  text-black hover:border-gray-300 hover:bg-gray-300 sm:px-3 sm:text-sm",children:[e.jsx(T,{className:"mr-1.5 h-4 w-4 stroke-[2.5]"}),e.jsx("span",{className:"hidden sm:inline-block",children:"Edit Roadmap"}),e.jsx("span",{className:"sm:hidden",children:"Edit"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white py-1.5 pl-2 pr-2 text-xs font-medium text-black hover:border-gray-300 hover:bg-gray-300 sm:px-3 sm:text-sm",children:[e.jsx(I,{className:"mr-1.5 h-4 w-4 stroke-[2.5]"}),"Sharing"]}),e.jsx(de,{onDelete:()=>{window.confirm("Are you sure you want to delete this roadmap?")&&w().finally(()=>null)}})]}),!s&&g==="public"&&e.jsxs(e.Fragment,{children:[i,e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white py-1.5 pl-2 pr-2 text-xs font-medium  text-black hover:border-gray-300 hover:bg-gray-300 sm:px-3 sm:text-sm",children:[e.jsx(I,{className:"mr-1.5 h-4 w-4 stroke-[2.5]"}),"Share with Others"]})]})]})]}),e.jsx(le,{roadmapTitle:r,hasTNSBanner:!1,roadmapId:n})]})})}function pe(o){const{error:s}=o;return s.status===404?e.jsx(P,{icon:e.jsx(L,{className:"h-16 w-16"}),title:"Roadmap not found",message:"The roadmap you are looking for does not exist or has been deleted."}):e.jsx(P,{icon:e.jsx(L,{className:"h-16 w-16"}),title:"Restricted Access",message:s?.message})}function P(o){const{title:s,message:t,icon:r}=o;return e.jsxs("div",{className:"flex grow flex-col items-center justify-center",children:[r,e.jsx("h2",{className:"mt-4 text-2xl font-semibold",children:s}),e.jsx("p",{children:t||"This roadmap is not available for public access."}),e.jsx("a",{href:"/",className:"mt-4 font-medium underline underline-offset-2 hover:no-underline",children:"← Go back to home"})]})}function ue(o){const{roadmapId:s,canManage:t,className:r}=o,c=`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_EDITOR_APP_URL}/${s}`;return e.jsx("div",{className:C("flex h-full items-center justify-center",r),children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(re,{className:"mx-auto h-20 w-20 text-gray-400"}),e.jsx("h3",{className:"mt-2",children:"This roadmap is currently empty."}),t&&e.jsxs("a",{href:c,className:"mt-4 flex items-center rounded-md bg-gray-500 px-4 py-2 font-medium text-white hover:bg-gray-600",children:[e.jsx(T,{className:"mr-2 inline-block h-4 w-4"}),"Edit Roadmap"]})]})})}function he(o){const{roadmap:s,isEmbed:t=!1}=o,r=String(s._id),[c,n]=d.useState(!1),m=d.useRef(null),h=A();async function x(l,i){t||(E.set("Updating progress"),ee({resourceId:r,resourceType:"roadmap",topicId:l},i).then(()=>{se(l,i)}).catch(a=>{h.error("Something went wrong, please try again."),console.error(a)}).finally(()=>{E.set(""),te()}))}const g=d.useCallback((l,i)=>{const a=l?.currentTarget;if(!a)return;const p=a?.classList.contains("done");x(i.id,p?"pending":"done")},[]),S=d.useCallback((l,i)=>{const a=l?.currentTarget;if(!a)return;const p=a?.classList.contains("learning");x(i.id,p?"pending":"learning")},[]),b=d.useCallback((l,i)=>{const a=l?.currentTarget;if(!a)return;const p=a?.classList.contains("skipped");x(i.id,p?"pending":"skipped")},[]),y=d.useCallback((l,i)=>{l?.currentTarget&&window.dispatchEvent(new CustomEvent("roadmap.node.click",{detail:{topicId:i.id,resourceId:r,resourceType:"roadmap",isCustomResource:!0}}))},[]),u=d.useCallback((l,i)=>{if(!i)return;i.startsWith("http")?window.open(i,"_blank"):window.location.href=i},[]),f=d.useCallback((l,i)=>{const a=l?.currentTarget;if(!a)return;const p=a?.classList.contains("done");x(i,p?"pending":"done")},[]),w=d.useCallback((l,i)=>{const a=l?.currentTarget;if(!a)return;const p=a?.classList.contains("done");x(i,p?"pending":"done")},[]);return e.jsxs(e.Fragment,{children:[c&&e.jsx(ue,{roadmapId:r,canManage:s.canManage,className:"grow"}),e.jsx(K,{ref:m,roadmap:s,className:C(s?.nodes?.length===0?"grow":"min-h-0 max-md:min-h-[1000px]"),onRendered:()=>{Q("roadmap",r).then(()=>{$.set(s?.nodes?.filter(l=>["topic","subtopic"].includes(l.type)).length||0),s?.nodes?.length===0&&(n(!0),m?.current?.classList.add("hidden"))})},onTopicClick:y,onTopicRightClick:g,onTopicShiftClick:S,onTopicAltClick:b,onButtonNodeClick:u,onLinkClick:u,onChecklistCheckboxClick:f,onChecklistLableClick:w,fontFamily:"Balsamiq Sans",fontURL:"/fonts/balsamiq.woff2"})]})}function xe(){const o=document.querySelector("[data-roadmap-loader]");o&&o.remove()}function ds(o){const{isEmbed:s=!1,slug:t}=o,{id:r,secret:c}=M(),[n,m]=d.useState(!0),[h,x]=d.useState(null),[g,S]=d.useState();async function b(){m(!0);const y=t?new URL(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-roadmap-by-slug/${t}`):new URL(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-roadmap/${r}`);c&&y.searchParams.set("secret",c);const{response:u,error:f}=await O(y.toString());if(f||!u){S(f),m(!1);return}document.title=`${u.title} - roadmap.sh`,x(u),j.set(u),m(!1)}return d.useEffect(()=>{b().finally(()=>{xe()})},[]),n?null:g?e.jsx(pe,{error:g}):e.jsxs(e.Fragment,{children:[!s&&e.jsx(me,{}),e.jsx(he,{isEmbed:s,roadmap:h}),e.jsx(J,{resourceTitle:h.title,resourceType:"roadmap",isEmbed:s,canSubmitContribution:!1})]})}export{ds as CustomRoadmap};
