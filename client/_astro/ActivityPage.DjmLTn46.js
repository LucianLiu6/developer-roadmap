import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{r as u}from"./index.qVDZzPEr.js";import{b as v}from"./http.DleWH6fe.js";import{R as A,A as j}from"./ActivityStream.De5kwIE1.js";import{p as d}from"./page.BgB1PChG.js";import{R as C}from"./RoadmapIcon.DnxludEj.js";import"./jwt.CBjnGchD.js";import"./number.BR84FmKJ.js";import"./use-outside-click.DwmohMvh.js";import"./use-keydown.DHXzDwpw.js";import"./ProgressShareButton.CwmJGoqC.js";import"./use-auth.BGqQ_BxX.js";import"./use-copy-text.oZSbS9-c.js";import"./CheckIcon.CbIpeqnx.js";import"./classname.BR_JCrAi.js";import"./use-toast.CP_0jytG.js";import"./toast.CxFvZIRu.js";import"./index.DgoachrA.js";import"./ellipsis-vertical.xxVYgC9t.js";import"./createLucideIcon.BiEhg7VK.js";import"./x.BPEozwHq.js";import"./date.4SaMaFlQ.js";import"./Modal.oLN6tDxH.js";import"./arrow-up-right.vFhbeTOi.js";import"./check.CKlj7MwC.js";import"./ActivityTopicTitles.CitEaLKA.js";function x(n){const{text:i,count:a}=n;return e.jsxs("div",{className:"relative flex flex-1 flex-row-reverse sm:flex-col px-0 sm:px-4 py-2 sm:py-4 text-center sm:pt-[1.62rem] items-center gap-2 sm:gap-0 justify-end",children:[e.jsx("h2",{className:"text-base sm:text-5xl font-bold",children:a}),e.jsx("p",{className:"mt-0 sm:mt-2 text-sm text-gray-400",children:i})]})}function w(n){const{done:i,learning:a,streak:l}=n;return e.jsx("div",{className:"mx-0 -mt-5 sm:-mx-10 md:-mt-10",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-0 sm:gap-2 divide-y sm:divide-y-0 divide-x-0 sm:divide-x border-b",children:[e.jsx(x,{text:"Topics Completed",count:`${i?.total||0}`}),e.jsx(x,{text:"Currently Learning",count:`${a?.total||0}`}),e.jsx(x,{text:"Visit Streak",count:`${l?.count||0}d`})]})})}function R(){return e.jsx("div",{className:"rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center p-7 text-center",children:[e.jsx(C,{className:"mb-2 w-[60px] h-[60px] sm:h-[120px] sm:w-[120px] opacity-10"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"No Progress"}),e.jsxs("p",{className:"my-1 sm:my-2 max-w-[400px] text-gray-500 text-sm sm:text-base",children:["Progress will appear here as you start tracking your"," ",e.jsx("a",{href:"/roadmaps",className:"mt-4 text-blue-500 hover:underline",children:"Roadmaps"})," ","or"," ",e.jsx("a",{href:"/best-practices",className:"mt-4 text-blue-500 hover:underline",children:"Best Practices"})," ","progress."]})]})})}function W(){const[n,i]=u.useState(),[a,l]=u.useState(!0);async function m(){const{error:t,response:s}=await v(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-user-stats`);if(!s||t){console.error("Error loading activity"),console.error(t);return}i(s)}u.useEffect(()=>{m().finally(()=>{d.set(""),l(!1)})},[]);const g=n?.learning.roadmaps||[],f=n?.learning.bestPractices||[];if(a)return null;const p=g.sort((t,s)=>{const r=new Date(t.updatedAt);return new Date(s.updatedAt).getTime()-r.getTime()}).filter(t=>t.learning>0||t.done>0),c=f.sort((t,s)=>{const r=new Date(t.updatedAt);return new Date(s.updatedAt).getTime()-r.getTime()}).filter(t=>t.learning>0||t.done>0),h=p.length!==0||c.length!==0;return e.jsxs(e.Fragment,{children:[e.jsx(w,{done:n?.done||{today:0,total:0},learning:n?.learning||{today:0,total:0},streak:n?.streak||{count:0}}),e.jsxs("div",{className:"mx-0 px-0 py-5 pb-0 md:-mx-10 md:px-8 md:py-8 md:pb-0",children:[p.length===0&&c.length===0&&e.jsx(R,{}),(p.length>0||c.length>0)&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mb-3 text-xs uppercase text-gray-400",children:"Continue Following"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1.5 sm:grid-cols-2",children:[g.sort((t,s)=>{const r=new Date(t.updatedAt);return new Date(s.updatedAt).getTime()-r.getTime()}).filter(t=>t.learning>0||t.done>0).map(t=>{const s=t.learning||0,r=t.done||0,o=t.total||0,y=t.skipped||0;return e.jsx(A,{isCustomResource:t.isCustomResource,doneCount:r>o?o:r,learningCount:s>o?o:s,totalCount:o,skippedCount:y,resourceId:t.id,resourceType:"roadmap",updatedAt:t.updatedAt,title:t.title,onCleared:()=>{d.set("Updating activity"),m().finally(()=>{d.set("")})}},t.id)}),f.sort((t,s)=>{const r=new Date(t.updatedAt);return new Date(s.updatedAt).getTime()-r.getTime()}).filter(t=>t.learning>0||t.done>0).map(t=>e.jsx(A,{isCustomResource:t.isCustomResource,doneCount:t.done||0,totalCount:t.total||0,learningCount:t.learning||0,resourceId:t.id,skippedCount:t.skipped||0,resourceType:"best-practice",title:t.title,updatedAt:t.updatedAt,onCleared:()=>{d.set("Updating activity"),m().finally(()=>{d.set("")})}},t.id))]})]})]}),h&&e.jsx(j,{activities:n?.activities||[]})]})}export{W as ActivityPage};
