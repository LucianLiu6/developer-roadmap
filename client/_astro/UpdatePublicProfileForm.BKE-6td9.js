import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{r as t}from"./index.qVDZzPEr.js";import{a as oe,h as je,b as te}from"./http.DleWH6fe.js";import{p as V}from"./page.BgB1PChG.js";import{S as b}from"./SelectionButton.CrUMHoKU.js";import{u as _}from"./use-toast.CP_0jytG.js";import{C as ve}from"./CreateRoadmapModal.C3z_b9m9.js";import"./jwt.CBjnGchD.js";import{u as ke}from"./use-outside-click.DwmohMvh.js";import{c as L}from"./classname.BR_JCrAi.js";import{G as le}from"./globe.AFJrkQ23.js";import{L as ae}from"./lock.BYgGEG3i.js";import{C as Se}from"./chevron-down.C0Ah6WXV.js";import{u as Ne}from"./use-debounce.BWtMyjUg.js";import{L as Ce}from"./loader-circle.fm240d5J.js";import{X as Re}from"./x.BPEozwHq.js";import{C as ne}from"./check.CKlj7MwC.js";import{U as Pe}from"./UploadProfilePicture.CYdRfeyx.js";import{c as ce}from"./createLucideIcon.BiEhg7VK.js";import{C as Ee}from"./circle-check-big.t3HpAHw2.js";import{u as Ue}from"./use-copy-text.oZSbS9-c.js";import{A as Ae}from"./arrow-up-right.vFhbeTOi.js";import{C as De}from"./copy.CXP3E7D5.js";import{E as re}from"./eye.mPBpY9vn.js";import"./index.DgoachrA.js";import"./toast.CxFvZIRu.js";import"./Modal.oLN6tDxH.js";import"./use-keydown.DHXzDwpw.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ce("FileBadge",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]]);function Le(i){const{visibility:l,setVisibility:u}=i,y=_(),a=t.useRef(null);ke(a,()=>{d(!1)});const[p,d]=t.useState(!1);async function m(o){V.set("Updating profile visibility"),d(!1);const{error:c}=await oe(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-update-public-profile-visibility`,{profileVisibility:o});if(c){y.error(c.message||"Something went wrong");return}V.set(""),u(o)}return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{d(!0)},className:L("flex items-center gap-1 rounded-lg border border-black py-1 pl-1.5 pr-2 text-sm capitalize text-black",{invisible:p}),children:[l==="public"&&e.jsx(le,{className:"mr-1",size:13}),l==="private"&&e.jsx(ae,{className:"mr-1",size:13}),l,e.jsx(Se,{size:13,className:"ml-1"})]}),p&&e.jsxs("div",{className:"absolute right-0 top-0 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-lg",ref:a,children:[e.jsxs("button",{className:L("flex w-full items-center gap-2 py-2.5 pl-3 pr-3.5 text-left text-sm hover:bg-gray-100",{"bg-gray-200":l==="public"}),onClick:()=>m("public"),children:[e.jsx(le,{size:13}),"Public"]}),e.jsxs("button",{className:L("flex w-full items-center gap-2 py-2.5 pl-3 pr-3.5 text-left text-sm hover:bg-gray-100",{"bg-gray-200":l==="private"}),onClick:()=>m("private"),children:[e.jsx(ae,{size:13}),"Private"]})]})]})}function Ve(i){const{username:l,setUsername:u,profileVisibility:y,currentUsername:a}=i,p=_(),[d,m]=t.useState(!1),[o,c]=t.useState(null),w=Ne(l,500);t.useEffect(()=>{C(w).then()},[w]);const C=async r=>{if(d||!r)return;if(r.length<3){c(!1);return}if(a&&r===a&&o!==!1){c(!0);return}m(!0);const{response:f,error:g}=await je(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-check-is-unique-username`,{username:r});if(g||!f){c(null),m(!1),p.error(g?.message||"Something went wrong. Please try again.");return}c(f.isUnique),m(!1)};return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("label",{htmlFor:"username",className:"flex min-h-[16.5px] items-center justify-between text-sm leading-none text-slate-500",children:[e.jsx("span",{children:"Profile URL"}),!d&&e.jsxs("span",{className:"flex items-center",children:[a&&(a===l||!l||!o)&&e.jsxs("span",{className:"text-xs",children:["Current URL"," ",e.jsxs("a",{href:`https://roadmap.sh/u/${a}`,target:"_blank",className:"ml-0.5 rounded-md border border-purple-500 px-1.5 py-0.5 font-mono text-xs font-medium text-purple-700 transition-colors hover:bg-purple-500 hover:text-white",children:["roadmap.sh/u/",a]})]}),a!==l&&l&&o&&e.jsxs("span",{className:"text-xs text-green-600",children:["URL after update"," ",e.jsxs("a",{href:`https://roadmap.sh/u/${l}`,target:"_blank",className:"ml-0.5 rounded-md border border-purple-500 px-1.5 py-0.5 text-xs font-medium text-purple-700 transition-colors hover:bg-purple-500 hover:text-purple-800 hover:text-white",children:["roadmap.sh/u/",l]})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center overflow-hidden rounded-lg border border-gray-300",children:[e.jsx("span",{className:"border-r border-gray-300 bg-gray-100 p-2",children:"roadmap.sh/u/"}),e.jsxs("div",{className:"relative grow",children:[e.jsx("input",{type:"text",name:"username",id:"username",className:"w-full px-3 py-2 outline-none placeholder:text-gray-400",placeholder:"johndoe",spellCheck:!1,value:l,title:"Username must be at least 3 characters long and can only contain letters, numbers, and underscores",onKeyDown:r=>{const f=r.key;!(/^[a-zA-Z0-9]*$/.test(f)&&l.length<10)&&!["Backspace","Delete","ArrowLeft","ArrowRight"].includes(f)&&r.preventDefault()},onChange:r=>{u(r.target.value.toLowerCase())},required:y==="public"}),l&&e.jsx("span",{className:"absolute bottom-0 right-0 top-0 flex items-center px-2",children:d?e.jsx(Ce,{className:"h-4 w-4 animate-spin"}):o===!1?e.jsx(Re,{className:"h-4 w-4 text-red-500"}):o===!0?e.jsx(ne,{className:"h-4 w-4 text-green-500"}):null})]})]})]})}const _e=["Add a link to your profile in your social media bio","Include your profile link in your resume to showcase your skills","Add a link to your profile in your email signature","Showcase your skills in your GitHub profile","Share your profile with potential employers"];function Fe(){return e.jsxs("div",{className:"relative mb-5 rounded-lg bg-yellow-200 px-3 py-3 text-sm text-yellow-800",children:[e.jsx(Ie,{className:"absolute hidden sm:block bottom-3 right-3 h-20 w-20 stroke-2 text-yellow-500 opacity-50"}),e.jsxs("h2",{className:"mb-1 text-base font-semibold",children:["Announcing Skill Profiles!"," "]}),e.jsx("p",{className:"text-sm",children:"Create your skill profile to showcase your skills or learning progress. Here are some of the ways you can use your skill profile:"}),e.jsx("div",{className:"my-3 ml-2 flex flex-col gap-1 sm:ml-3",children:_e.map(i=>e.jsxs("p",{className:"flex flex-row items-start gap-1.5 sm:items-center",children:[e.jsx(Ee,{className:"relative top-[3px] h-3.5 w-3.5 flex-shrink-0 stroke-[2.5] sm:top-0"}),e.jsx("span",{children:i})]},i))}),e.jsxs("p",{className:"text-sm",children:["Make sure to mark your expertise"," ",e.jsx("a",{href:"/roadmaps",target:"_blank",className:"font-semibold underline underline-offset-2",children:"in the roadmaps."})]})]})}function us(){const[i,l]=t.useState("public"),u=_(),[y,a]=t.useState(!1),[p,d]=t.useState(""),[m,o]=t.useState(!1),[c,w]=t.useState(!0),[C,r]=t.useState(""),[f,g]=t.useState(""),[F,de]=t.useState(""),[R,P]=t.useState("all"),[E,U]=t.useState("all"),[j,v]=t.useState([]),[k,S]=t.useState([]),[me,ue]=t.useState(""),[O,B]=t.useState(""),[T,pe]=t.useState(""),[M,$]=t.useState(""),[H,q]=t.useState(""),[z,X]=t.useState(""),[G,K]=t.useState(""),[W,Z]=t.useState(""),[J,fe]=t.useState([]),[Y,x]=t.useState(!1),{isCopied:A,copyText:xe}=Ue(),he=async s=>{s.preventDefault(),x(!0);const{response:n,error:D}=await oe(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-update-public-profile-config`,{isAvailableForHire:m,isEmailVisible:c,profileVisibility:i,headline:C,username:f,roadmapVisibility:R,customRoadmapVisibility:E,roadmaps:j,customRoadmaps:k,github:M,twitter:H,linkedin:z,website:W,name:O,email:F,dailydev:G});if(D||!n){x(!1),u.error(D?.message||"Something went wrong");return}await Q(),u.success("Profile updated successfully")},Q=async()=>{x(!0);const{error:s,response:n}=await te(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-profile-settings`);if(s||!n){x(!1),u.error(s?.message||"Something went wrong");return}const{name:D,email:be,links:N,username:I,profileVisibility:ye,publicConfig:h,avatar:we}=n;pe(we||""),d(I?`/u/${I}`:""),g(I||""),ue(I||""),B(D||""),de(be||""),$(N?.github||""),q(N?.twitter||""),X(N?.linkedin||""),K(N?.dailydev||""),Z(N?.website||""),l(ye||"public"),r(h?.headline||""),P(h?.roadmapVisibility||"all"),U(h?.customRoadmapVisibility||"all"),S(h?.customRoadmaps||[]),v(h?.roadmaps||[]),o(h?.isAvailableForHire||!1),w(h?.isEmailVisible??!0),x(!1)},ge=async()=>{x(!0);const{error:s,response:n}=await te(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-profile-roadmaps`);if(s||!n){x(!1),u.error(s?.message||"Something went wrong");return}fe(n?.roadmaps||[]),x(!1)};t.useEffect(()=>{Promise.all([Q(),ge()]).finally(()=>{V.set("")})},[]);const ee=J.filter(s=>s.isCustomResource),se=J.filter(s=>!s.isCustomResource);return e.jsxs("div",{children:[y&&e.jsx(ve,{onClose:()=>a(!1)}),e.jsx(Fe,{}),e.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-2 sm:mb-1 sm:flex-row",children:[e.jsxs("div",{className:"flex flex-grow flex-row items-center gap-2 sm:items-center",children:[e.jsx("h3",{className:"mr-1 text-xl font-bold sm:text-3xl",children:"Skill Profile"}),p&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:p,target:"_blank",className:"flex shrink-0 flex-row items-center gap-1 rounded-lg border border-black py-0.5 pl-1.5 pr-2.5 text-xs uppercase transition-colors hover:bg-black hover:text-white",children:[e.jsx(Ae,{className:"h-3 w-3 stroke-[3]"}),"Visit"]}),e.jsxs("button",{onClick:()=>{xe(`${window.location.origin}${p}`)},className:L("flex shrink-0 flex-row items-center gap-1 rounded-lg border border-black py-0.5 pl-1.5 pr-2.5 text-xs uppercase transition-colors hover:bg-black hover:text-white",{"bg-black text-white":A}),children:[!A&&e.jsx(De,{className:"h-3 w-3 stroke-[2.5]"}),A&&e.jsx(ne,{className:"h-3 w-3 stroke-[2.5]"}),A?"Copied!":"Copy URL"]})]})]}),e.jsx(Le,{visibility:i,setVisibility:l})]}),e.jsx("p",{className:"mb-8 mt-2 hidden text-sm text-gray-400 sm:mt-0 sm:block sm:text-base",children:"Create your skill profile to showcase your skills."}),e.jsx(Pe,{type:"avatar",label:"Profile picture",avatarUrl:T?`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_AVATAR_BASE_URL}/${T}`:"/images/default-avatar.png"}),e.jsxs("form",{className:"mt-6 space-y-4 pb-10",onSubmit:he,children:[e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"name",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Name"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,placeholder:"John Doe",value:O,onInput:s=>B(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"email",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Email"}),e.jsx("a",{href:"/account/settings",className:"text-xs text-purple-700 underline hover:text-purple-800",children:"Visit settings page to change email"})]}),e.jsx("input",{type:"email",name:"email",id:"email",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,disabled:!0,placeholder:"john@example.com",value:F}),e.jsx("div",{className:"flex items-center justify-end gap-2 rounded-md text-xs text-gray-400",children:e.jsxs("div",{className:"flex select-none items-center justify-end gap-2 rounded-md text-xs text-gray-400",children:[e.jsx("input",{type:"checkbox",name:"isEmailVisible",id:"isEmailVisible",checked:c,onChange:s=>w(s.target.checked)}),e.jsx("label",{htmlFor:"isEmailVisible",className:"flex-grow cursor-pointer py-1.5",children:"Show my email on profile"})]})})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"headline",className:"text-sm leading-none text-slate-500",children:"Headline"}),e.jsx("input",{type:"text",name:"headline",id:"headline",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Full Stack Developer",value:C,onChange:s=>r(s.target.value),required:i==="public"})]}),e.jsx(Ve,{username:f,setUsername:g,profileVisibility:i,currentUsername:me}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Which roadmap progresses do you want to show on your profile?"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(b,{type:"button",text:"All Progress",icon:re,isDisabled:!1,isSelected:R==="all",onClick:()=>{P("all"),v([])}}),e.jsx(b,{type:"button",icon:ie,text:"Hide my Progress",isDisabled:!1,isSelected:R==="none",onClick:()=>{P("none"),v([])}})]}),e.jsx("h3",{className:"mt-4 text-sm text-gray-400",children:"Or select the roadmaps you want to show"}),se.length>0?e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:se.map(s=>e.jsx(b,{type:"button",text:s.title,isDisabled:!1,isSelected:j.includes(s.id),onClick:()=>{R!=="selected"&&P("selected"),j.includes(s.id)?v(j.filter(n=>n!==s.id)):v([...j,s.id])}},s.id))}):e.jsxs("p",{className:"mt-2 rounded-lg bg-yellow-100 p-2 text-sm text-yellow-700",children:["Update"," ",e.jsx("a",{target:"_blank",className:"font-medium underline underline-offset-2 hover:text-yellow-800",href:"/roadmaps",children:"your progress on roadmaps"})," ","to show your learning activity."]})]}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Pick your custom roadmaps to show on your profile"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(b,{type:"button",text:"All Roadmaps",icon:re,isDisabled:!1,isSelected:E==="all",onClick:()=>{U("all"),S([])}}),e.jsx(b,{type:"button",text:"Hide my Roadmaps",icon:ie,isDisabled:!1,isSelected:E==="none",onClick:()=>{U("none"),S([])}})]}),e.jsx("h3",{className:"mt-4 text-sm text-gray-400",children:"Or select the custom roadmaps you want to show"}),ee.length>0?e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:ee.map(s=>e.jsx(b,{type:"button",text:s.title,isDisabled:!1,isSelected:k.includes(s.id),onClick:()=>{E!=="selected"&&U("selected"),k.includes(s.id)?S(k.filter(n=>n!==s.id)):S([...k,s.id])}},s.id))}):e.jsxs("p",{className:"mt-2 rounded-lg bg-yellow-100 p-2 text-sm text-yellow-700",children:["You do not have any custom roadmaps."," ",e.jsx("button",{type:"button",className:"font-medium underline underline-offset-2 hover:text-yellow-800",onClick:()=>{a(!0)},children:"Create one now"}),"."]})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"github",className:"text-sm leading-none text-slate-500",children:"Github"}),e.jsx("input",{type:"text",name:"github",id:"github",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://github.com/username",value:M,onChange:s=>$(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"twitter",className:"text-sm leading-none text-slate-500",children:"Twitter"}),e.jsx("input",{type:"text",name:"twitter",id:"twitter",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://twitter.com/username",value:H,onChange:s=>q(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"linkedin",className:"text-sm leading-none text-slate-500",children:"LinkedIn"}),e.jsx("input",{type:"text",name:"linkedin",id:"linkedin",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://www.linkedin.com/in/username/",value:z,onChange:s=>X(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"dailydev",className:"text-sm leading-none text-slate-500",children:"daily.dev"}),e.jsx("input",{type:"text",name:"dailydev",id:"dailydev",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://app.daily.dev/username",value:G,onChange:s=>K(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"website",className:"text-sm leading-none text-slate-500",children:"Website"}),e.jsx("input",{type:"text",name:"website",id:"website",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://example.com",value:W,onChange:s=>Z(s.target.value)})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex select-none items-center gap-2 rounded-md border px-3 hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",name:"isAvailableForHire",id:"isAvailableForHire",checked:m,onChange:s=>o(s.target.checked)}),e.jsx("label",{htmlFor:"isAvailableForHire",className:"flex-grow cursor-pointer py-1.5",children:"Available for Hire"})]})}),e.jsx("button",{type:"submit",disabled:Y,className:"inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:Y?"Please wait..":"Save Profile"})]})]})}export{us as UpdatePublicProfileForm};
