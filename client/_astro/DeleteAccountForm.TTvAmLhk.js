import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{r as s}from"./index.qVDZzPEr.js";import{c as m}from"./http.DleWH6fe.js";import{l as f}from"./navigation.CyMjOeTC.js";import"./jwt.CBjnGchD.js";function y(){const[n,o]=s.useState(!1),[c,r]=s.useState(""),[a,l]=s.useState("");s.useEffect(()=>{r(""),l("")},[]);const i=async t=>{if(t.preventDefault(),o(!0),r(""),a.toUpperCase()!=="DELETE"){r("Verification text does not match"),o(!1);return}const{response:p,error:d}=await m(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-delete-account`);if(d||!p){o(!1),r(d?.message||"Something went wrong");return}f()},u=()=>{o(!1),r(""),l("");const t=document.getElementById("delete-account-popup");t?.classList.add("hidden"),t?.classList.remove("flex")};return e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"my-4",children:[e.jsx("input",{type:"text",name:"delete-account",id:"delete-account",className:"mt-2 block w-full rounded-md border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400 focus:border-gray-400",placeholder:'Type "delete" to confirm',required:!0,autoFocus:!0,value:a,onInput:t=>l(t.target.value)}),c&&e.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:c})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:n,onClick:u,className:"flex-grow cursor-pointer rounded-lg bg-gray-200 py-2 text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n||a.toUpperCase()!=="DELETE",className:"flex-grow cursor-pointer rounded-lg bg-red-500 py-2 text-white disabled:opacity-40",children:n?"Please wait ..":"Confirm"})]})]})}export{y as DeleteAccountForm};
