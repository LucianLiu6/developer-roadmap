import{j as t}from"./jsx-runtime.CAnB4H9Z.js";import{r}from"./index.qVDZzPEr.js";import{b as k,a as I}from"./http.DleWH6fe.js";import{s as m}from"./page.BgB1PChG.js";import{u as j}from"./index.BVW7W7Ao.js";import{a as u,b as R}from"./jwt.CBjnGchD.js";import{X as $}from"./x.BPEozwHq.js";import"./index.DgoachrA.js";import"./createLucideIcon.BiEhg7VK.js";function L(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function C(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function N(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function _(){return C()||N()}function d(){return L()||_()}const f="sponsorClosed";function A(o){u.set(`${f}-${o}`,"1",{path:"/",expires:1,sameSite:"lax",secure:!0,domain:".roadmap.sh"})}function O(o){return u.get(`${f}-${o}`)==="1"}function F(o){const{gaPageIdentifier:a}=o,h=j(m),[i,x]=r.useState(null),[p,S]=r.useState(),g=async()=>{const e=window.location.pathname;if(e==="/"||e==="/best-practices"||e==="/roadmaps"||e.startsWith("/guides")||e.startsWith("/videos")||e.startsWith("/account")||e.startsWith("/team"))return;const{response:s,error:n}=await k(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-get-sponsor`,{href:window.location.pathname,mobile:d()?"true":"false"});if(n){console.error(n);return}!s?.sponsor||!s.id||O(s.id)||(S(s.sponsor),x(s.id),window.fireEvent({category:"SponsorImpression",action:`${s.sponsor?.company} Impression`,label:s.sponsor.gaLabel||`${a} / ${s.sponsor?.company} Link`}))},b=async e=>{const s=new URL(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://roadmap.sh/",ASSETS_PREFIX:void 0}.PUBLIC_API_URL}/v1-view-sponsor/${e}`),{response:n,error:l}=await I(s.toString(),{mobile:d()});if(l||!n){console.error(l);return}R(e)};if(r.useEffect(()=>{window.setTimeout(g)},[]),h||!p)return null;const{url:w,title:E,imageUrl:P,description:v,company:c,gaLabel:y}=p;return t.jsxs("a",{href:w,target:"_blank",rel:"noopener sponsored nofollow",className:"fixed bottom-0 left-0 right-0 z-50 flex bg-white shadow-lg outline-0 outline-transparent sm:bottom-[15px] sm:left-auto sm:right-[15px] sm:max-w-[350px]",onClick:async()=>{window.fireEvent({category:"SponsorClick",action:`${c} Redirect`,label:y||`${a} / ${c} Link`}),await b(i||"")},children:[t.jsx("span",{className:"absolute right-1 top-1 text-gray-400 hover:text-gray-800 sm:right-1.5 sm:top-1.5 sm:text-gray-300","aria-label":"Close",onClick:e=>{e.preventDefault(),A(i||""),m.set(!0)},children:t.jsx($,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),t.jsx("span",{children:t.jsx("img",{src:P,className:"block h-[106px] object-cover sm:h-[169px] sm:w-[118.18px]",alt:"Sponsor Banner"})}),t.jsxs("span",{className:"flex flex-1 flex-col justify-between text-xs sm:text-sm",children:[t.jsxs("span",{className:"p-[10px]",children:[t.jsx("span",{className:"mb-0.5 block font-semibold",children:E}),t.jsx("span",{className:"block text-gray-500",children:v})]}),t.jsx("span",{className:"sponsor-footer hidden sm:block",children:"Partner Content"}),t.jsx("span",{className:"block pb-1 text-center text-[10px] uppercase text-gray-400 sm:hidden",children:"Partner Content"})]})]})}export{F as PageSponsor};
