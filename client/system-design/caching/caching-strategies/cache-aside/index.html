<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/system-design/content/112-caching/105-caching-strategies/100-cache-aside.md"></div> <h1 id="cache-aside">Cache-aside</h1>
<p>The application is responsible for reading and writing from storage. The cache does not interact with storage directly. The application does the following:</p>
<ul>
<li>Look for entry in cache, resulting in a cache miss</li>
<li>Load entry from the database</li>
<li>Add entry to cache</li>
<li>Return entry</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#50FA7B"> get_user</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">user_id</span><span style="color:#F8F8F2">):</span></span>
<span class="line"><span style="color:#F8F8F2">  user </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> cache.get(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">user.</span><span style="color:#BD93F9">{0}</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, user_id)</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> user </span><span style="color:#FF79C6">is</span><span style="color:#BD93F9"> None</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">    user </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> db.query(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">SELECT * FROM users WHERE user_id = </span><span style="color:#BD93F9">{0}</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, user_id)</span></span>
<span class="line"><span style="color:#FF79C6">      if</span><span style="color:#F8F8F2"> user </span><span style="color:#FF79C6">is</span><span style="color:#FF79C6"> not</span><span style="color:#BD93F9"> None</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">        key </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">user.</span><span style="color:#BD93F9">{0}</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">.format(user_id)</span></span>
<span class="line"><span style="color:#F8F8F2">        cache.set(key, json.dumps(user))</span></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> user</span></span>
<span class="line"></span></code></pre>
<p><a href="https://memcached.org/" rel="noopener noreferrer nofollow" target="_blank">Memcached</a> is generally used in this manner. Subsequent reads of data added to cache are fast. Cache-aside is also referred to as lazy loading. Only requested data is cached, which avoids filling up the cache with data that isnâ€™t requested.</p>
<p><img src="https://i.imgur.com/Ujf0awN.png" alt="Cache Aside"></p>
<p>To learn more, have a look at the following resources:</p>
<ul>
<li><a href="https://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast" rel="noopener noreferrer nofollow" target="_blank">@article@From cache to in-memory data grid</a></li>
</ul>