<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/react-native/content/107-networking/102-websockets.md"></div> <h1 id="websockets">Websockets</h1>
<p>WebSockets are a protocol that allows full-duplex communication between a client and a server over a single, long-lived connection. They are useful when real-time communication is needed, such as in chat applications, online gaming, or financial trading platforms.</p>
<h2 id="setting-up-a-websocket-connection">Setting up a WebSocket connection</h2>
<p>In React Native, you can use the <code>WebSocket</code> API to establish a WebSocket connection with the server. Here’s an example of how to open a WebSocket connection:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> webSocket </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#50FA7B"> WebSocket</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">ws://my-websocket-server.com</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h2 id="receiving-and-sending-messages">Receiving and sending messages</h2>
<p>You can handle the different events associated with a WebSocket connection by attaching event listeners to the <code>WebSocket</code> instance.</p>
<h3 id="handling-connection">Handling connection</h3>
<p>To handle connection establishment, you can use the <code>onopen</code> event listener:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">webSocket.</span><span style="color:#50FA7B">onopen</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">event</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">WebSocket connection opened:</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, event);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span></code></pre>
<h3 id="handling-incoming-messages">Handling incoming messages</h3>
<p>To receive messages from the server, you can use the <code>onmessage</code> event listener:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">webSocket.</span><span style="color:#50FA7B">onmessage</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">event</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">Received from server:</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, event.data);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span></code></pre>
<h3 id="sending-messages-to-the-server">Sending messages to the server</h3>
<p>To send messages to the server, you can use the <code>send</code> method:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">webSocket.</span><span style="color:#50FA7B">send</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">Hello server</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span></code></pre>
<h3 id="handling-connection-error-and-closure">Handling connection error and closure</h3>
<p>You can catch connection errors and closure events using the <code>onerror</code> and <code>onclose</code> event listeners:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">webSocket.</span><span style="color:#50FA7B">onerror</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">event</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">WebSocket error:</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, event);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">webSocket.</span><span style="color:#50FA7B">onclose</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">event</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">WebSocket connection closed:</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, event);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span></code></pre>
<h2 id="closing-the-websocket-connection">Closing the WebSocket connection</h2>
<p>To close the WebSocket connection, you can use the <code>close</code> method:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F8F8F2">webSocket.</span><span style="color:#50FA7B">close</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span></code></pre>
<p>That’s a brief summary of using WebSockets in React Native! Don’t forget to handle various edge cases such as connection loss, reconnection, and graceful shutdowns in a real-world application.</p>